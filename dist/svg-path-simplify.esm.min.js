function e(e,t,a="red",l="1%",n="1",r="",s=!0,i="",p=""){Array.isArray(t)&&(t={x:t[0],y:t[1]});let u=`<circle class="${p}" opacity="${n}" id="${i}" cx="${t.x}" cy="${t.y}" r="${l}" fill="${a}">\n  <title>${r}</title></circle>`;if(!s)return u;e.insertAdjacentHTML("beforeend",u)}function t(e,t="",a="green",l="1%",n="1",r=!0){let s=`<path d="${t}" fill="none" stroke="${a}"  stroke-width="${l}" stroke-opacity="${n}" /> `;if(!r)return s;e.insertAdjacentHTML("beforeend",s)}const{abs:a,acos:l,asin:n,atan:r,atan2:s,ceil:i,cos:p,exp:u,floor:h,log:o,max:y,min:c,pow:x,random:g,round:f,sin:d,sqrt:v,tan:m,PI:M}=Math;function b(e,t,a=!1){let l=s(t.y-e.y,t.x-e.x);return a&&l<0&&(l+=2*Math.PI),l}function A(e,t,a,l=!1){let n=Math.atan2(t.y-e.y,t.x-e.x),r=Math.atan2(a.y-e.y,a.x-e.x),s=r-n;s=(e=>{let t=e%(2*Math.PI);return t>Math.PI?t-=2*Math.PI:t<=-Math.PI&&(t+=2*Math.PI),t})(s),l&&(s=2*Math.PI-Math.abs(s));let i=180/Math.PI;return{startAngle:n,endAngle:r,deltaAngle:s,startAngleDeg:n*i,endAngleDeg:r*i,deltaAngleDeg:s*i}}function C(e=null,t=null,a=null,l=null,n=!0,r=!1){let s,i,p,u,h,o={};if(!(e&&t&&a&&l))return r&&console.warn("points missing"),!1;try{if(s=(l.y-a.y)*(t.x-e.x)-(l.x-a.x)*(t.y-e.y),0==s)return!1}catch{return r&&console.warn("!catch",e,t,"p3:",a,"p4:",l),!1}i=e.y-a.y,p=e.x-a.x,u=(l.x-a.x)*i-(l.y-a.y)*p,h=(t.x-e.x)*i-(t.y-e.y)*p,i=u/s,p=h/s,o={x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)};let y=!1;return i>0&&i<1&&p>0&&p<1&&(y=!0),!(n&&!y)&&o}function w(e,t){return v((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function L(e,t){return(t.x-e.x)**2+(t.y-e.y)**2}function P(e,t,a,l=!1){let n={x:(t.x-e.x)*a+e.x,y:(t.y-e.y)*a+e.y};return l&&(n.angle=b(e,t),n.angle<0&&(n.angle+=2*M)),n}function S(e,t=.5,a=!1,l=!1){let n;return n=e.length>2?((e,t,a=!1)=>{let n=4===e.length,r=e[0],s=e[1],i=n?e[2]:e[1],p=e[e.length-1],u={x:0,y:0};if(a||l){let e,a,h,o,y,c=r.x===s.x&&r.y===s.y,x=p.x===i.x&&p.y===i.y;0!==t||c?1!==t||x?(c&&(t+=1e-7),x&&(t-=1e-7),e=P(r,s,t),n?(a=P(s,i,t),h=P(i,p,t),o=P(e,a,t),y=P(a,h,t),u=P(o,y,t),u.angle=b(o,y),l&&(u.cpts=[a,h,o,y])):(a=P(r,s,t),h=P(s,p,t),u=P(a,h,t),u.angle=b(a,h),l&&(u.cpts=[a,h]))):(u.x=p.x,u.y=p.y,u.angle=b(i,p)):(u.x=r.x,u.y=r.y,u.angle=b(r,s))}else{let e=1-t;u=n?{x:e**3*r.x+3*e**2*t*s.x+3*e*t**2*i.x+t**3*p.x,y:e**3*r.y+3*e**2*t*s.y+3*e*t**2*i.y+t**3*p.y}:{x:e*e*r.x+2*e*t*s.x+t**2*p.x,y:e*e*r.y+2*e*t*s.y+t**2*p.y}}return u})(e,t,a):P(e[0],e[1],t,a),a&&n.angle<0&&(n.angle+=2*M),n}function E(e){let t=[],a={x:e[0].values[0],y:e[0].values[1]};return e.forEach(e=>{let{type:l,values:n}=e;if(n.length){let e=n.length>1?{x:n[n.length-2],y:n[n.length-1]}:"V"===l?{x:a.x,y:n[0]}:{x:n[0],y:a.y};t.push(e),a=e}}),t}function k(e,t,l,n,r,i,p,u,h){const o=(e,t,a,l)=>s(l-t,a-e);let y={cx:0,cy:0,rx:l=a(l),ry:n=a(n),startAngle:0,endAngle:0,deltaAngle:0,clockwise:p,xAxisRotation:r,largeArc:i,sweep:p};if(0==l||0==n)throw Error("rx and ry can not be 0");if(l===n){let a=Math.abs(u-e),l=Math.abs(h-t),n=a,r=Math.min(e,u),s=Math.min(t,h),i=.5*Math.PI;if(0===a&&l||0===l&&a)return n=0===a&&l?l/2:a/2,y.rx=n,y.ry=n,0===a&&l?(y.cx=e,y.cy=s+l/2,y.startAngle=t>h?i:-i,y.endAngle=t>h?-i:i,y.deltaAngle=p?Math.PI:-Math.PI):0===l&&a&&(y.cx=r+a/2,y.cy=t,y.startAngle=e>u?Math.PI:0,y.endAngle=e>u?-Math.PI:Math.PI,y.deltaAngle=p?Math.PI:-Math.PI),y}let c,x,g=l===n?0:r*M/180,f=g?Math.sin(g):0,d=g?Math.cos(g):1,v=(e-u)/2,m=(t-h)/2,b=(e+u)/2,A=(t+h)/2,C=g?d*v+f*m:v,w=g?d*m-f*v:m,L=C*C/(l*l)+w*w/(n*n);L>1&&(l*=Math.sqrt(L),n*=Math.sqrt(L),y.rx=l,y.ry=n);let P=l*n,S=l*w,E=n*C,k=S**2+E**2;if(!k)throw Error("start point can not be same as end point");let I=Math.sqrt(Math.abs((P*P-k)/k));i==p&&(I=-I);let F=I*S/n,$=-I*E/l;c=g?d*F-f*$+b:b+F,x=g?f*F+d*$+A:A+$,y.cy=x,y.cx=c;let D=o(c,x,e,t),T=o(c,x,u,h);!p&&T>D&&(T-=2*Math.PI),p&&D>T&&(T=T<=0?T+2*Math.PI:T);let q=T-D;return y.startAngle=D,y.endAngle=T,y.deltaAngle=q,y}function I(e,t,a,l=0,n=!1){return l?(l=n?l/180*Math.PI:l,{x:t+(e.x-t)*Math.cos(l)-(e.y-a)*Math.sin(l),y:a+(e.x-t)*Math.sin(l)+(e.y-a)*Math.cos(l)}):e}function F(e,t,a,l,n,s=0,i=!0,u=!1){if(n=u?n*M/180:n,s=u?s*M/180:s,s=a!==l&&s!==2*M?s:0,i&&a!==l){let e=r(m(n=s?n-s:n)*(a/l));n=p(n)<0?e+M:e}let h=e+a*p(n),o=t+l*d(n),y={x:h,y:o};return s&&(y.x=e+(h-e)*p(s)-(o-t)*d(s),y.y=t+(h-e)*d(s)+(o-t)*p(s)),y}function $(e,t,a){if(t===a||e%M*.5==0)return e;let l=r(m(e)*(t/a));return l=p(e)<0?l+M:l,l}function D(e=null,t=[],a=.05){e||(e=t[0],t=t.splice(1,t.length));let l=3===t.length,n=t[0]||null,r=l?t[1]:null,s=l?t[2]:t[1],i=.5*Math.PI,p=!1,u=!1,h=n?b(s,n,!0):null;if(p=Math.abs(h%i)<a||Math.abs(h%i-i)<a,l){let e=r?b(r,s,!0):0;u=Math.abs(e%i)<=a||Math.abs(e%i-i)<=a}return p||u}function T(e,{addExtremes:t=!0,addSemiExtremes:a=!1}={}){let l=4===e.length?function(e,t,a,l,{addExtremes:n=!0,addSemiExtremes:r=!1}={}){const s=e=>{const t=Math.PI/4,a=Math.cos(t),l=Math.sin(t);return{x:e.x*a-e.y*l,y:e.x*l+e.y*a}};r&&(e=s(e),t=s(t),a=s(a),l=s(l));let[i,p,u,h,o,y,c,x]=[e.x,e.y,t.x,t.y,a.x,a.y,l.x,l.y],g=Math.min(e.y,l.y),f=Math.min(e.x,l.x),d=Math.max(e.x,l.x),v=Math.max(e.y,l.y);if(t.y>=g&&t.y<=v&&a.y>=g&&a.y<=v&&t.x>=f&&t.x<=d&&a.x>=f&&a.x<=d)return[];let m,M,b,A,C,w,L,P,S=[];for(let e=0;e<2;++e)if(0==e?(M=6*i-12*u+6*o,m=-3*i+9*u-9*o+3*c,b=3*u-3*i):(M=6*p-12*h+6*y,m=-3*p+9*h-9*y+3*x,b=3*h-3*p),Math.abs(m)<1e-8){if(Math.abs(M)<1e-8)continue;A=-b/M,0<A&&A<1&&S.push(A)}else L=M*M-4*b*m,L<0?Math.abs(L)<1e-8&&(A=-M/(2*m),0<A&&A<1&&S.push(A)):(P=Math.sqrt(L),C=(-M+P)/(2*m),0<C&&C<1&&S.push(C),w=(-M-P)/(2*m),0<w&&w<1&&S.push(w));let E=S.length;for(;E--;)A=S[E];return S}(e[0],e[1],e[2],e[3],{addExtremes:t,addSemiExtremes:a}):function(e,t,a,{addExtremes:l=!0,addSemiExtremes:n=!1}={}){const r=e=>{const t=-Math.PI/4,a=Math.cos(t),l=Math.sin(t);return{x:e.x*a-e.y*l,y:e.x*l+e.y*a}};n&&(e=r(e),t=r(t),a=r(a));let s,i,p,u=Math.min(e.y,a.y),h=Math.min(e.x,a.x),o=Math.max(e.x,a.x),y=Math.max(e.y,a.y);if(t.y>=u&&t.y<=y&&t.x>=h&&t.x<=o)return[];let[c,x,g,f,d,v]=[e.x,e.y,t.x,t.y,a.x,a.y],m=[];for(let e=0;e<2;++e)s=0==e?c-2*g+d:x-2*f+v,i=0==e?-2*c+2*g:-2*x+2*f,Math.abs(s)>1e-12&&(p=-i/(2*s),p>0&&p<1&&m.push(p));return m}(e[0],e[1],e[2],{addExtremes:t,addSemiExtremes:a});return l}function q(e,t){const a=(e,t,a,l,n,r)=>{var s=Math.cos(r),i=Math.sin(r),p=l*Math.cos(e),u=n*Math.sin(e);return{x:t+s*p-i*u,y:a+i*p+s*u}};let l,n,r,s,i,p=k(e.x,e.y,t[0],t[1],t[2],t[3],t[4],t[5],t[6]),{rx:u,ry:h,cx:o,cy:y,endAngle:c,deltaAngle:x}=p,g=t[2],f={x:t[5],y:t[6]},d=[f],v=g*Math.PI/180,m=Math.tan(v);i=Math.atan2(-h*m,u);let M=i,b=i+Math.PI,A=Math.atan2(h,u*m),C=A+Math.PI,w=[e.x,f.x],L=[e.y,f.y],P=Math.min(...w),S=Math.max(...w),E=Math.min(...L),I=Math.max(...L),F=a(c-.001*x,o,y,u,h,v),$=a(c-.999*x,o,y,u,h,v);return(F.x>S||$.x>S)&&(l=a(M,o,y,u,h,v),d.push(l)),(F.x<P||$.x<P)&&(n=a(b,o,y,u,h,v),d.push(n)),(F.y<E||$.y<E)&&(s=a(C,o,y,u,h,v),d.push(s)),(F.y>I||$.y>I)&&(r=a(A,o,y,u,h,v),d.push(r)),d}function z(e,t=.001){let a=Math.PI/2,l=a/2;return!(Math.abs(e/a-Math.round(e/a))<t)&&Math.abs(e/l-Math.round(e/l))<t}function Q(e,t){return(Math.abs(t.x-e.x)+Math.abs(t.y-e.y))/2}function B(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function j(e){let t=[],a=[e[0]],l=e.length;for(let n=1;n<l;n++){let l=e[n];"M"!==l.type&&"m"!==l.type||(t.push(a),a=[]),a.push(l)}return a.length&&t.push(a),t}function Z(e,t){let a,l,n,r,s,i,p=[],u=[],h=e[0],o=e[1],y=e[e.length-2],c=e[e.length-1];return 4===e.length?(a=S([h,o],t),l=S([o,y],t),n=S([y,c],t),r=S([a,l],t),s=S([l,n],t),i=S([r,s],t),p.push({x:h.x,y:h.y},{x:a.x,y:a.y},{x:r.x,y:r.y},{x:i.x,y:i.y}),u.push({x:i.x,y:i.y},{x:s.x,y:s.y},{x:n.x,y:n.y},{x:c.x,y:c.y})):3===e.length?(l=S([h,o],t),n=S([o,c],t),i=S([l,n],t),p.push({x:h.x,y:h.y},{x:l.x,y:l.y},{x:i.x,y:i.y}),u.push({x:i.x,y:i.y},{x:n.x,y:n.y},{x:c.x,y:c.y})):2===e.length&&(l=S([h,c],t),p.push({x:h.x,y:h.y},{x:l.x,y:l.y}),u.push({x:l.x,y:l.y},{x:c.x,y:c.y})),[p,u]}function N(e,t,{tMin:a=0,tMax:l=1,addExtremes:n=!0,addSemiExtremes:r=!1}={}){let s=[],i=6===t.length?"C":"Q",p={x:t[0],y:t[1]},u="C"===i?{x:t[2],y:t[3]}:p,h={x:t[4],y:t[5]},o=0;let y="C"===i?[e,p,u,h]:[e,p,h],c=n?T(y,{addExtremes:n,addSemiExtremes:!1}):[],x=r?T(y,{addExtremes:n,addSemiExtremes:r}):[],g=Array.from(new Set([...c,...x])).sort();if(g=g.filter(e=>e>0&&e<1),g.length){let a=function(e,t,a,l=!0){let n=[];if(!a.length)return!1;let r,s,i,p=t.length,u={x:t[p-2],y:t[p-1]};2===t.length?i=[e,u]:4===t.length?(r={x:t[0],y:t[1]},i=[e,r,u]):6===t.length&&(r={x:t[0],y:t[1]},s={x:t[2],y:t[3]},i=[e,r,s,u]);if(a.length)if(1===a.length){let e=Z(i,a[0]),t=e[0],l=e[1];n.push(t,l)}else{let e=a[0],t=Z(i,e),l=t[0];n.push(l),i=t[1];for(let t=1;t<a.length;t++){e=a[t-1];let l=Z(i,(a[t]-e)/(1-e));n.push(l[0]),t===a.length-1&&n.push(l[l.length-1]),i=l[1]}}if(l){let e,t,a=[];return n.forEach(l=>{e={type:"",values:[]},l.shift(),t=l.map(e=>Object.values(e)).flat(),e.values=t,3===l.length?e.type="C":2===l.length?e.type="Q":1===l.length&&(e.type="L"),a.push(e)}),a}return n}(e,t,g);s.push(...a),o+=a.length}else s.push({type:i,values:t});return{pathData:s,count:o}}function R(e,{tMin:t=0,tMax:a=1,addExtremes:l=!0,addSemiExtremes:n=!1}={}){let r=[e[0]],s={x:e[0].values[0],y:e[0].values[1]},i={x:e[0].values[0],y:e[0].values[1]},p=e.length;for(let u=1;p&&u<p;u++){let p=e[u],{type:h,values:o}=p,y=o.slice(-2);if(y[0],y[1],"C"!==h&&"Q"!==h)r.push(p);else if((l||n)&&("C"===h||"Q"===h)){let e=N(s,o,{tMin:t,tMax:a,addExtremes:l,addSemiExtremes:n}).pathData;r.push(...e)}s={x:y[0],y:y[1]},"z"===h.toLowerCase()?s=i:"M"===h&&(i={x:y[0],y:y[1]})}return r}function O(e,t=-1){let a=e.map(e=>e.x),l=e.map(e=>e.y),n=Math.min(...a),r=Math.max(...a),s=Math.min(...l),i=Math.max(...l),p={x:n,left:n,right:r,y:s,top:s,bottom:i,width:r-n,height:i-s};if(t>-1)for(let e in p)p[e]=+p[e].toFixed(t);return p}function H(e){let t=[];return e.forEach(e=>{let a=function(e){let t=function(e){let t=[];for(let a=0;a<e.length;a++){let l=e[a],n=a>0?e[a-1]:e[a],{type:r,values:s}=l,i={x:n.values[n.values.length-2],y:n.values[n.values.length-1]},p=s.length?{x:s[s.length-2],y:s[s.length-1]}:"",u=s.length?{x:s[0],y:s[1]}:"";switch(r){case"A":if("function"!=typeof arcToBezier){let e=w(i,p)/2,a=P(i,p,.5),l=F(a.x,a.y,e,e,0),n=F(a.x,a.y,e,e,Math.PI);t.push(l,n,p);break}arcToBezier(i,s).forEach(e=>{let a=e.values,l={x:a[0],y:a[1]},n={x:a[2],y:a[3]},r={x:a[4],y:a[5]};t.push(l,n,r)});break;case"C":let e={x:s[2],y:s[3]};t.push(u,e);break;case"Q":t.push(u)}"z"!==r.toLowerCase()&&t.push(p)}return t}(e),a=O(t);return a}(e);t.push(a)}),t}function U(e,t){let[a,l,n,r,s,i]=[e.x,e.y,e.width,e.height,e.x+e.width,e.y+e.height],[p,u,h,o,y,c]=[t.x,t.y,t.width,t.height,t.x+t.width,t.y+t.height],x=!1;return n*r!=h*o&&n*r>h*o&&a<p&&s>y&&l<u&&i>c&&(x=!0),x}function V(e,t=9){let a=0,l=[],n=j(e),r=n.length>1,s=[];if(r){let e=H(n);e.forEach(function(t,a){for(let a=0;a<e.length;a++){let l=e[a];if(t!=l){U(t,l)&&s.push(a)}}})}return n.forEach((e,t)=>{l=[];let n=0,r=0,i=1,p=[];e.forEach(function(t,a){let[r,s]=[t.type,t.values],i=s.length;if(s.length){let u=(a>0?e[a-1]:e[0]).values,h=u.length,o={x:u[h-2],y:u[h-1]},y={x:s[i-2],y:s[i-1]};if("C"===r||"Q"===r){let e={x:s[0],y:s[1]};p="C"===r?[o,e,{x:s[2],y:s[3]},y]:[o,e,y];let t=Math.abs(function(e,t=!1){let a,[l,n,r,s]=[e[0],e[1],e[2],e[e.length-1]];if(e.length<3)return 0;3===e.length&&(n={x:1*e[0].x/3+2*e[1].x/3,y:1*e[0].y/3+2*e[1].y/3},r={x:1*e[2].x/3+2*e[1].x/3,y:1*e[2].y/3+2*e[1].y/3});return a=3*(l.x*(-2*n.y-r.y+3*s.y)+n.x*(2*l.y-r.y-s.y)+r.x*(l.y+n.y-2*s.y)+s.x*(-3*l.y+n.y+2*r.y))/20,t?Math.abs(a):a}(p));n+=t,l.push(o,y)}else if("A"===r){let e=k(o.x,o.y,t.values[0],t.values[1],t.values[2],t.values[3],t.values[4],y.x,y.y),{cx:a,cy:r,rx:s,ry:i,startAngle:p,endAngle:u,deltaAngle:h}=e,c=Math.abs(function(e,t,a,l){const n=Math.PI*e*t;let r=(l-a+2*Math.PI)%(2*Math.PI);if(e===t)return n*(r/(2*Math.PI));const s=a=>Math.atan2(e*Math.sin(a),t*Math.cos(a));return a=s(a),l=s(l),r=(l-a+2*Math.PI)%(2*Math.PI),n*(r/(2*Math.PI))}(s,i,p,u));c-=Math.abs(W([o,{x:a,y:r},y])),l.push(o,y),n+=c}else l.push(o,y)}});let u=W(l);-1!==s.indexOf(t)&&(i=-1),r=u<0&&n<0?(Math.abs(n)-Math.abs(u))*i:(Math.abs(n)+Math.abs(u))*i,a+=r}),a}function W(e,t=!1){let a=0;for(let t=0,l=e.length;l&&t<l;t++){a+=e[t].x*e[t===e.length-1?0:t+1].y*.5-e[t===e.length-1?0:t+1].x*e[t].y*.5}return t&&(a=Math.abs(a)),a}function J(e,t=0){t=parseFloat(t);let a=e.length,l=t>1,n=!l&&!t,r="",s=l?"\n":n?"":" ",i=n?"":" ";r=`${e[0].type}${i}${e[0].values.join(" ")}${s}`;for(let t=1;t<a;t++){let a=e[t-1],l=e[t],{type:p,values:u}=l;if(!n||"A"!==p&&"a"!==p||(u=[u[0],u[1],u[2],`${u[3]}${u[4]}${u[5]}`,u[6]]),p=n&&a.type===l.type&&"m"!==l.type.toLowerCase()||n&&"M"===a.type&&"L"===l.type?" ":l.type,n){let e="",t=!1;for(let a=0,l=u.length;a<l;a++){let l=u[a],n=l.toString(),r=n.includes(".")&&Math.abs(l)<1;r&&t&&(n=n.replace(/^0\./,".")),!(a>0)||t&&r||(e+=" "),e+=n,t=r}r+=`${p}${i}${e}${s}`}else r+=`${p}${i}${u.join(" ")}${s}`}return n&&(r=r.replace(/ 0\./g," .").replace(/ -/g,"-").replace(/-0\./g,"-.").replace(/Z/g,"z")),r}function X(a,l,n=0,r=1,s=!1){const i=(e,t,a,l,n)=>{let r=1-n;return{x:3*r*r*(t.x-e.x)+6*r*n*(a.x-t.x)+3*n*n*(l.x-a.x),y:3*r*r*(t.y-e.y)+6*r*n*(a.y-t.y)+3*n*n*(l.y-a.y)}};let p=[a,l],u=Q(a.p0,a.p)>Q(l.p0,l.p),h=JSON.parse(JSON.stringify(a)),o=JSON.parse(JSON.stringify(l)),y=C(h.p0,h.cp1,o.p,o.cp2,!1);if(!y)return p;if(u){let e={p0:{x:a.p.x,y:a.p.y},cp1:{x:a.cp2.x,y:a.cp2.y},cp2:{x:a.cp1.x,y:a.cp1.y},p:{x:a.p0.x,y:a.p0.y}};a={p0:{x:l.p.x,y:l.p.y},cp1:{x:l.cp2.x,y:l.cp2.y},cp2:{x:l.cp1.x,y:l.cp1.y},p:{x:l.p0.x,y:l.p0.y}},l=e}let c=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),x=(e,t)=>({x:e.x*t,y:e.y*t}),g=(e,t)=>e.x*t.x+e.y*t.y,f=l.p0,d=i(l.p0,l.cp1,l.cp2,l.p,0),v=g(c(a.p0,f),d)/g(d,d),m=S([l.p0,l.cp1,l.cp2,l.p],v),M=i(l.p0,l.cp1,l.cp2,l.p,v);v-=g(c(m,a.p0),M)/g(M,M);let b=S([l.p0,l.cp1,l.cp2,l.p],v),A=l.p,w=i(l.p0,l.cp1,l.cp2,l.p,v),L=i(l.p0,l.cp1,l.cp2,l.p,1),E=1-v,k=(I=b,F=x(w,E/3),{x:I.x+F.x,y:I.y+F.y});var I,F;let $=c(A,x(L,E/3)),D={p0:b,cp1:k,cp2:$,p:A,t0:v};u&&(D={p0:A,cp1:$,cp2:k,p:b,t0:v});let T=.5*(1-v),q=S([D.p0,D.cp1,D.cp2,D.p],T,!1,!0),z=q.cpts[2],B=C(q,z,D.p0,y,!1),j=C(q,z,D.p,y,!1),Z=P(D.p0,B,1.333),N=P(D.p,j,1.333);if(C(h.p0,Z,o.p,N,!0))return p;s&&e(markers,q,"purple"),D.cp1=Z,D.cp2=N;let R=Q(h.p0,D.p0)+Q(o.p,D.p);if(D.p0=h.p0,D.p=o.p,D.extreme=o.extreme,D.corner=o.corner,D.dimA=o.dimA,D.directionChange=o.directionChange,D.type="C",D.values=[D.cp1.x,D.cp1.y,D.cp2.x,D.cp2.y,D.p.x,D.p.y],R<n){let e=u?1+v:Math.abs(v),l=1+Math.abs(v);if(e=u?1+v:Math.abs(v)/l,Q(S([D.p0,D.cp1,D.cp2,D.p],e),a.p)>n*r)return p;let i=V([{type:"M",values:[h.p0.x,h.p0.y]},{type:"C",values:[h.cp1.x,h.cp1.y,h.cp2.x,h.cp2.y,h.p.x,h.p.y]},{type:"C",values:[o.cp1.x,o.cp1.y,o.cp2.x,o.cp2.y,o.p.x,o.p.y]}]),y=[{type:"M",values:[D.p0.x,D.p0.y]},{type:"C",values:[D.cp1.x,D.cp1.y,D.cp2.x,D.cp2.y,D.p.x,D.p.y]}],c=V(y),x=Math.abs(c/i-1);if(D.error=5*x*r,s){let e=J(y);t(markers,e,"orange")}x<.05*r&&(p=[D])}return p}function Y(e,{keepExtremes:t=!0,keepInflections:a=!0,keepCorners:l=!0,extrapolateDominant:n=!0,tolerance:r=1}={}){let s=[e[0]],i=e.length;for(let n=2;i&&n<=i;n++){let p=e[n-1],u=n<i?e[n]:null,h=u?.type||null,{type:o,values:y,p0:c,p:x,cp1:g=null,cp2:f=null,extreme:d=!1,directionChange:v=!1,corner:m=!1,dimA:M=0}=p;if("C"===o&&"C"===h)if(l&&m||t&&d)s.push(p);else{let h=G(p,u,{tolerance:r}),o=0;
//!count simplification success or failure - just for debugging
if(1===h.length){p=h[0];let u=1;o+=p.error;
//!log.push(`success1: ${i} and ${i + 1}`)
for(let s=n+1;o<r&&s<i;s++){let n=e[s];if("C"!==n.type||a&&p.directionChange||l&&p.corner||t&&p.extreme)break;let i=G(p,n,{tolerance:r});if(i.length>1)break;o+=.5*i[0].error,u++,
//!log.push(`success2: ${i} and ${n}`)
p=i[0]}s.push(p),n<i&&(n+=u)}else s.push(p)}else s.push(p)}return s}function G(e,t,{tolerance:a=1}={}){let l=[e,t],n=function(e,t){let a=B(e.cp2,e.p);if(0===a)return 0;let l=B(e.p,t.cp1);if(0===l)return 0;let n=B(e.cp2,t.cp1);return a/n}(e,t);if(!n)return l;let r=B(e.p0,e.p),s=B(t.p0,t.p),i=.08*Math.max(0,Math.min(r,s))*a,p=function(e,t,a=0){let{p0:l,cp1:n}=e,{p:r,cp2:s}=t;return n={x:(n.x-(1-a)*l.x)/a,y:(n.y-(1-a)*l.y)/a},s={x:(s.x-a*r.x)/(1-a),y:(s.y-a*r.y)/(1-a)},{p0:l,cp1:n,cp2:s,p:r}}(e,t,n),u=S([p.p0,p.cp1,p.cp2,p.p],n),h=B(e.p,u),o=0,y=0,c=!1,x=h;if(h<i){let a=.5*(1+n);if(o=B(S([t.p0,t.cp1,t.cp2,t.p],.5),S([p.p0,p.cp1,p.cp2,p.p],a)),x+=o,o<i){let t=.5*n;y=B(S([e.p0,e.cp1,e.cp2,e.p],.5),S([p.p0,p.cp1,p.cp2,p.p],t)),x+=y,x<i&&(c=!0)}}return c&&(p.p0=e.p0,p.p=t.p,p.dimA=B(p.p0,p.p),p.type="C",p.extreme=t.extreme,p.directionChange=t.directionChange,p.corner=t.corner,p.values=[p.cp1.x,p.cp1.y,p.cp2.x,p.cp2.y,p.p.x,p.p.y],p.error=x/i,l=[p]),l}function K(e,{tolerance:t=1,debug:a=!1}={}){let l=!1,n={flat:!0,steepness:0},r=e[0],s=e[e.length-1],i=new Set([...e.map(e=>+e.x.toFixed(8))]),p=new Set([...e.map(e=>+e.y.toFixed(8))]);if(1===i.size||1===p.size)return!a||n;let u=L(r,s),h=u/1e3*t,o=W(e,!0);return o<h&&(l=!0),a&&(n.flat=l,n.steepness=o/u*10),a?n:l}function _(t=[],{detectExtremes:a=!0,detectCorners:l=!0,detectDirection:n=!0,detectSemiExtremes:r=!1,debug:s=!1,addSquareLength:i=!0,addArea:p=!0}={}){t=function(e,{addSquareLength:t=!0,addArea:a=!1,addArcParams:l=!1,addAverageDim:n=!0}={}){let r=e[0],s={x:r.values[0],y:r.values[1]},i=s,p=s;r.p0=i,r.p=p,r.idx=0,r.dimA=0;let u=e.length,h=[r];for(let l=1;l<u;l++){let n,r,u=e[l],{type:o,values:y}=u,c=y.length;if(p=c?{x:y[c-2],y:y[c-1]}:s,u.p0=i,u.p=p,u.dimA=B(i,p),"M"===o&&(s=p),"Q"===o||"C"===o)n={x:y[0],y:y[1]},r="C"===o?{x:y[2],y:y[3]}:null,u.cp1=n,r&&(u.cp2=r);else if("A"===o){let{rx:e,ry:t,cx:a,cy:l,startAngle:n,endAngle:r,deltaAngle:s}=k(i.x,i.y,...y);u.cx=a,u.cy=l,u.rx=e,u.ry=t,u.xAxisRotation=y[2]/180*Math.PI,u.largeArc=y[3],u.sweep=y[4],u.startAngle=n,u.endAngle=r,u.deltaAngle=s}if("Z"===o&&s.x!==p.x&&s.y!==p.y&&(u.closePath=!0),t&&(u.squareDist=L(i,p)),a){let e=0;"C"===o&&(e=W([i,n,r,p],!1)),"Q"===o&&(e=W([i,n,p],!1)),u.cptArea=e}u.idx=l,i=p,h.push(u)}return h}(t,{addSquareLength:i,addArea:p});let u=[],h=O(E(t)),{left:o,right:y,top:c,bottom:x,width:g,height:f}=h;t[0].corner=!1,t[0].extreme=!1,t[0].semiExtreme=!1,t[0].directionChange=!1,t[0].closePath=!1;let d=[t[0]],v=t.length,m=2*Math.PI/360*10,M=r?.01:.05;for(let a=2;v&&a<=v;a++){let l=t[a-1],{type:n,values:i,p0:p,p:u,cp1:h=null,cp2:g=null,squareDist:f=0,cptArea:v=0,dimA:A=0}=l,C=t[a]||null;l.corner=!1,l.extreme=!1,l.semiExtreme=!1,l.directionChange=!1,l.closePath=!1;let w="C"===n||"Q"===n?"C"===n?[p,h,g,u]:[p,h,u]:[p,u],L=.1*A,P=f*.01,S=Math.abs(v)<P,E="Q"===n||"C"===n,k=C&&("Q"===C.type||"C"===C.type),I=!1;if(S||"L"===n||(u.x===o||u.y===c||u.x===y||u.y===x?I=!0:E&&(I=D(null,w,M))),I&&(l.extreme=!0),E&&k){if(r&&!l.extreme){let e=Math.abs(u.x-g.x),t=Math.abs(u.y-g.y),a=!1;if(e&&t&&e>L||t>L){let e=b(g,u),t=b(u,C.cp1);a=z(Math.abs(e+t)/2)}a&&(l.semiExtreme=!0)}if((l.cptArea<0&&C.cptArea>0||l.cptArea>0&&C.cptArea<0)&&(l.directionChange=!0),!l.extreme){let e=g?[g,u]:[h,u],t=[u,C.cp1],a=b(...e,!0),n=b(...t,!0);Math.abs(a-n)>m&&(l.corner=!0)}}s&&(l.semiExtreme&&e(markers,l.p,"blue","2%","0.5"),l.directionChange&&e(markers,l.p,"orange","1.5%","0.5"),l.corner&&e(markers,l.p,"magenta","1.5%","0.5"),l.extreme&&e(markers,l.p,"cyan","1%","0.5")),d.push(l)}return u={pathData:d,bb:h,dimA:(g+f)/2},u}function ee(e){let t=[];for(let a=1,l=e.length;a<l;a++){let l=e[a],{type:n,values:r,p0:s=null,p:i=null,dimA:p=0}=l;r.length&&i&&s&&(p=p||B(s,i),p&&t.push(p))}let a=t.sort(),l=Math.ceil(a.length/8);a=a.slice(0,l);let n=a.reduce((e,t)=>e+t,0)/l,r=n>75?0:Math.floor(50/n).toString().length;return Math.min(Math.max(0,r),8)}function te(e,t=-1){if(t<0)return e;let a=e.length;for(let l=0;l<a;l++){let a=e[l].values,n=a.length;if(n)for(let r=0;r<n;r++)e[l].values[r]=+a[r].toFixed(t)}return e}function ae(e={},t={},a={},l={}){let n=P(e,t,1.5),r=P(l,a,1.5),s=.03*Q(e,l),i=Q(n,r),p=null,u={type:"C",values:[t.x,t.y,a.x,a.y,l.x,l.y]};return i&&s&&i<s&&(p=C(e,t,l,a,!1),p&&(u.type="Q",u.values=[p.x,p.y,l.x,l.y],u.p0=e,u.cp1=p,u.cp2=null,u.p=l)),u}function le(e,{toShorthands:t=!0,toLonghands:a=!1,toRelative:l=!0,toAbsolute:n=!1,decimals:r=3,arcToCubic:s=!1,quadraticToCubic:i=!1,hasRelatives:p=!0,hasShorthands:u=!0,hasQuadratics:h=!0,hasArcs:o=!0,testTypes:y=!1}={}){if(y){let t=Array.from(new Set(e.map(e=>e.type))).join("");/[lcqamts]/gi.test(t),h=/[qt]/gi.test(t),o=/[a]/gi.test(t),u=/[vhst]/gi.test(t),isPoly=/[mlz]/gi.test(t)}return l=!n&&l,t=!a&&t,h&&i&&(e=re(e)),o&&s&&(e=ne(e)),t&&(e=function(e,t=-1,a=!1){let l;if(a){let t=e.map(e=>e.type).join("");l=/[astvqmhlc]/g.test(t)}e=a&&l?ie(e):e;let n=e.length,r=new Array(n),s={type:"M",values:e[0].values};r[0]=s;let i,p={x:e[0].values[0],y:e[0].values[1]},u=.015;for(let a=1;a<n;a++){let l=e[a],{type:n,values:h}=l,o=h.length,y=[h[o-2],h[o-1]],c=e[a-1],x=c.type;i={x:y[0],y:y[1]};let g,f,d,v,m={x:h[0],y:h[1]},M=Math.abs(i.x-p.x),b=Math.abs(i.y-p.y),A=(M+b)/2*u;switch(n){case"L":s=0===b||b<A&&M>A?{type:"H",values:[h[0]]}:0===M||b>A&&M<A?{type:"V",values:[h[1]]}:l;break;case"Q":if("Q"!==x){p={x:y[0],y:y[1]},r[a]=l;continue}let e={x:c.values[0],y:c.values[1]};v={x:2*p.x-e.x,y:2*p.y-e.y},g=Math.abs(m.x-v.x),f=Math.abs(m.y-v.y),d=(g+f)/2,s=d<A?{type:"T",values:[i.x,i.y]}:l;break;case"C":let t={x:h[2],y:h[3]};if("C"!==x){r[a]=l,p={x:y[0],y:y[1]};continue}let u={x:c.values[2],y:c.values[3]};v={x:2*p.x-u.x,y:2*p.y-u.y},g=Math.abs(m.x-v.x),f=Math.abs(m.y-v.y),d=(g+f)/2,s=d<A?{type:"S",values:[t.x,t.y,i.x,i.y]}:l;break;default:s={type:n,values:h}}(l.decimals||0===l.decimals)&&(s.decimals=l.decimals),t>-1&&(s.values=s.values.map(e=>+e.toFixed(t))),p={x:y[0],y:y[1]},r[a]=s}return r}(e)),u&&a&&(e=ue(e)),r>-1&&l&&(e=te(e,r)),n&&(e=pe(e)),l&&(e=function(e,t=-1){return ie(e,!0,t)}(e)),r>-1&&(e=te(e,r)),e}function ne(e,{arcAccuracy:t=1}={}){let a=[e[0]];for(let l=1,n=e.length;l<n;l++){let n=e[l],r=e[l-1].values,s=r.length,i={x:r[s-2],y:r[s-1]};if("A"===n.type){oe(i,n.values,t).forEach(e=>{a.push(e)})}else a.push(n)}return a}function re(e){let t=[e[0]];for(let a=1,l=e.length;a<l;a++){let l=e[a],n=e[a-1].values,r=n.length,s={x:n[r-2],y:n[r-1]};"Q"===l.type?t.push(se(s,l.values)):t.push(l)}return t}function se(e,t){Array.isArray(e)&&(e={x:e[0],y:e[1]});let a={x:e.x+2/3*(t[0]-e.x),y:e.y+2/3*(t[1]-e.y)},l={x:t[2]+2/3*(t[0]-t[2]),y:t[3]+2/3*(t[1]-t[3])};return{type:"C",values:[a.x,a.y,l.x,l.y,t[2],t[3]]}}function ie(e,t=!1,a=-1){a>=0&&(e[0].values=e[0].values.map(e=>+e.toFixed(a)));let l=e[0].values,n=l[0],r=l[1],s=n,i=r;for(let l=1,p=e.length;l<p;l++){let p=e[l],{type:u,values:h}=p,o=t?u.toLowerCase():u.toUpperCase();if(u!==o)switch(u=o,p.type=u,u){case"a":case"A":h[5]=t?h[5]-n:h[5]+n,h[6]=t?h[6]-r:h[6]+r;break;case"v":case"V":h[0]=t?h[0]-r:h[0]+r;break;case"h":case"H":h[0]=t?h[0]-n:h[0]+n;break;case"m":case"M":t?(h[0]-=n,h[1]-=r):(h[0]+=n,h[1]+=r),s=t?h[0]+n:h[0],i=t?h[1]+r:h[1];break;default:if(h.length)for(let e=0;e<h.length;e++)h[e]=t?h[e]-(e%2?r:n):h[e]+(e%2?r:n)}let y=h.length;switch(u){case"z":case"Z":n=s,r=i;break;case"h":case"H":n=t?n+h[0]:h[0];break;case"v":case"V":r=t?r+h[0]:h[0];break;case"m":case"M":s=h[y-2]+(t?n:0),i=h[y-1]+(t?r:0);default:n=h[y-2]+(t?n:0),r=h[y-1]+(t?r:0)}a>=0&&(p.values=p.values.map(e=>+e.toFixed(a)))}return e}function pe(e,t=-1){return ie(e,!1,t)}function ue(e,t=-1,a=!0){let l=!1;if(a){let t=e.map(e=>e.type).join(""),a=/[hstv]/gi.test(t);if(l=/[astvqmhlc]/g.test(t),!a)return e}let n=[],r={type:"M",values:(e=a&&l?pe(e,t):e)[0].values};n.push(r);for(let a=1,l=e.length;a<l;a++){let l,s,i,p,u,h,o,y,c=e[a],{type:x,values:g}=c,f=g.length,d=r.values,v=d.length,[m,M]=[g[f-2],g[f-1]],[b,A]=[d[v-2],d[v-1]];switch(x){case"H":r={type:"L",values:[g[0],A]};break;case"V":r={type:"L",values:[b,g[0]]};break;case"T":[l,s]=[d[0],d[1]],[b,A]=[d[v-2],d[v-1]],i=b+(b-l),p=A+(A-s),r={type:"Q",values:[i,p,m,M]};break;case"S":[l,s]=[d[0],d[1]],[b,A]=[d[v-2],d[v-1]],[o,y]=v>2&&"A"!==r.type?[d[2],d[3]]:[b,A],i=2*b-o,p=2*A-y,u=g[0],h=g[1],r={type:"C",values:[i,p,u,h,m,M]};break;default:r={type:x,values:g}}t>-1&&(r.values=r.values.map(e=>+e.toFixed(t))),n.push(r)}return n}function he({p0:e={x:0,y:0},p:t={x:0,y:0},centroid:a={x:0,y:0},rx:l=0,ry:n=0,xAxisRotation:r=0,radToDegree:s=!1,startAngle:i=null,endAngle:p=null,deltaAngle:u=null}={}){if(!l||!n)return[];let h=[];const o=1.5707963267948966;let y=s?r:r*Math.PI/180,c=Math.cos(y),x=Math.sin(y);null!==i&&null!==p&&null!==u||({startAngle:i,endAngle:p,deltaAngle:u}=A(a,e,t));let g=l!==n?$(i,l,n):i,f=l!==n?$(u,l,n):u,d=Math.max(1,Math.ceil(Math.abs(f)/o)),v=f/d;for(let e=0;e<d;e++){const e=Math.abs(v)===o?.551785*Math.sign(v):4/3*Math.tan(v/4);let t=Math.cos(g),r=Math.sin(g),s=Math.cos(g+v),i=Math.sin(g+v),p=[];[{x:t-r*e,y:r+t*e},{x:s+i*e,y:i-s*e},{x:s,y:i}].forEach(e=>{let t=e.x*l,r=e.y*n;p.push(c*t-x*r+a.x,x*t+c*r+a.y)}),h.push({type:"C",values:p,cp1:{x:p[0],y:p[1]},cp2:{x:p[2],y:p[3]},p:{x:p[4],y:p[5]}}),g+=v}return h}function oe(e,t,a=1){const l=2*Math.PI;let[n,r,s,i,p,u,h]=t;if(0===n||0===r)return[];let o=s?s*l/360:0,y=o?Math.sin(o):0,c=o?Math.cos(o):1,x=c*(e.x-u)/2+y*(e.y-h)/2,g=-y*(e.x-u)/2+c*(e.y-h)/2;if(0===x&&0===g)return[];n=Math.abs(n),r=Math.abs(r);let f=x*x/(n*n)+g*g/(r*r);if(f>1){let e=Math.sqrt(f);n*=e,r*=e}let d=n*n,v=n===r?d:r*r,m=x*x,M=g*g,b=d*v-d*M-v*m;b<=0?b=0:(b/=d*M+v*m,b=Math.sqrt(b)*(i===p?-1:1));let A=b?b*n/r*g:0,C=b?b*-r/n*x:0,w=c*A-y*C+(e.x+u)/2,L=y*A+c*C+(e.y+h)/2,P=(x-A)/n,S=(g-C)/r,E=(-x-A)/n,k=(-g-C)/r;const I=(e,t,a,l)=>{let n=+(e*a+t*l).toFixed(9);return 1===n||-1===n?1===n?0:Math.PI:(n=n>1?1:n<-1?-1:n,(e*l-t*a<0?-1:1)*Math.acos(n))};let F=I(1,0,P,S),$=I(P,S,E,k);0===p&&$>0?$-=2*Math.PI:1===p&&$<0&&($+=2*Math.PI);let D=(+(Math.abs($)/(l/4)).toFixed(0)||1)*a;$/=D;let T=[];const q=1.5707963267948966,z=.551785;let Q=$===q?z:$===-q?-z:4/3*Math.tan($/4),B=$?Math.cos($):1,j=$?Math.sin($):0;const Z=(e,t,a,l,n)=>{let r=e!=t?Math.cos(e):l,s=e!=t?Math.sin(e):n,i=Math.cos(e+t),p=Math.sin(e+t);return[{x:r-s*a,y:s+r*a},{x:i+p*a,y:p-i*a},{x:i,y:p}]};for(let e=0;e<D;e++){let e={type:"C",values:[]};Z(F,$,Q,B,j).forEach(t=>{let a=t.x*n,l=t.y*r;e.values.push(c*a-y*l+w,y*a+c*l+L)}),T.push(e),F+=$}return T}function ye(e,{toAbsolute:t=!0,toLonghands:a=!0,quadraticToCubic:l=!1,arcToCubic:n=!1,arcAccuracy:r=4}={}){let s=Array.isArray(e),i=s&&"object"==typeof e[0]&&"function"==typeof e[0].constructor,p=s?e:function(e,t=!0){e=e.trim();let a={pathData:[],hasRelatives:!1,hasShorthands:!1,hasArcs:!1,hasQuadratics:!1,isPolygon:!1,log:[]};if(""===e)return a;let l,n=0,r=e.length,s="",i=-1,p="",u=!1,h=0,o=0,y=0,c=!1,x=new Set([]);const g=()=>{c&&("M"===s?s="L":"m"===s&&(s="l"),a.pathData.push({type:s,values:[]}),i++,o=0,c=!1)},f=(e=!1)=>{(e?h>0:""!==p)&&(t&&-1===i&&(l="Pathdata must start with M command",a.log.push(l),s="M",a.pathData.push({type:s,values:[]}),y=2,o=0,i++),"A"===s||"a"===s?(({val:p,valueIndex:o}=de(p,o)),a.pathData[i].values.push(...p)):(t&&p[1]&&"."!==p[1]&&"0"===p[0]&&(l=`${i}. command: Leading zeros not valid: ${p}`,a.log.push(l)),a.pathData[i].values.push(+p)),o++,p="",h=0,c=o>=y)},d=()=>{if(i>0){let e=a.pathData[i].values.length;if(e&&e<y||e&&e>y||("z"===s||"Z"===s)&&e>0){l=`${i}. command of type "${s}": ${y-e} values too few - ${y} expected`,a.log[log.length-1]!==l&&a.log.push(l)}}};let v=!1,m=!1,M=!1,b="";for(;n<r;){b=e.charCodeAt(n);let r=b>47&&b<58;if(r||(v=101===b||69===b,m=45===b||43===b,M=46===b),r||m||M||v){if(u||45!==b&&46!==b)g();else{let e=46===b;f(e),g(),e&&h++}p+=e[n],u=v,n++}else if((b<48||b>5759)&&fe(b))f(),n++;else{if(b>64){if(!ce.has(b)){l=`${i}. command "${e[n]}" is not a valid type`,a.log.push(l),n++;continue}""!==p&&(a.pathData[i].values.push(+p),o++,p=""),t&&d(),s=e[n],y=xe[b];let r="M"===s||"m"===s,u=i>0&&("z"===a.pathData[i].type||"Z"===a.pathData[i].type);x.add(s),u&&!r&&(a.pathData.push({type:"m",values:[0,0]}),i++),a.pathData.push({type:s,values:[]}),i++,h=0,o=0,c=!1,n++;continue}r||(l=`${i}. ${e[n]} is not a valid separarator or token`,a.log.push(l),p=""),n++}}f(),t&&d();t&&a.log.length&&(l="Invalid path data:\n"+a.log.join("\n"),"log"===t?console.log(l):console.warn(l));a.pathData[0].type="M";let A=Array.from(x).join("");return a.hasRelatives=/[lcqamts]/g.test(A),a.hasShorthands=/[vhst]/gi.test(A),a.hasArcs=/[a]/gi.test(A),a.hasQuadratics=/[qt]/gi.test(A),a.isPolygon=!/[cqats]/gi.test(A),a}(e),{hasRelatives:u=!0,hasShorthands:h=!0,hasQuadratics:o=!0,hasArcs:y=!0}=p,c=i?p:p.pathData;return c=function(e=[],{toAbsolute:t=!0,toLonghands:a=!0,quadraticToCubic:l=!1,arcToCubic:n=!1,arcAccuracy:r=2,hasRelatives:s=!0,hasShorthands:i=!0,hasQuadratics:p=!0,hasArcs:u=!0,testTypes:h=!1}={}){if(h){let t=Array.from(new Set(e.map(e=>e.type))).join("");s=/[lcqamts]/gi.test(t),p=/[qt]/gi.test(t),u=/[a]/gi.test(t),i=/[vhst]/gi.test(t),isPoly=/[mlz]/gi.test(t)}return(p&&l||u&&n)&&(a=!0,t=!0),s&&t&&(e=ie(e,!1)),i&&a&&(e=ue(e,-1,!1)),u&&n&&(e=ne(e,r)),p&&l&&(e=re(e)),e}(c,{toAbsolute:t,toLonghands:a,quadraticToCubic:l,arcToCubic:n,arcAccuracy:r,hasRelatives:u,hasShorthands:h,hasQuadratics:o,hasArcs:y}),c}const ce=new Set([77,109,65,97,67,99,76,108,81,113,83,115,84,116,72,104,86,118,90,122]),xe=new Uint8Array(128);xe[77]=2,xe[109]=2,xe[65]=7,xe[97]=7,xe[67]=6,xe[99]=6,xe[76]=2,xe[108]=2,xe[81]=4,xe[113]=4,xe[83]=4,xe[115]=4,xe[84]=2,xe[116]=2,xe[72]=1,xe[104]=1,xe[86]=1,xe[118]=1,xe[90]=0,xe[122]=0;const ge=new Set([5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279]),fe=e=>32===e||44===e||10===e||13===e||8232===e||8233===e||9===e||11===e||12===e||160===e||e>=5760&&ge.has(e),de=(e="",t=0)=>{let a=e.length;return 3===t&&2===a?(e=[+e[0],+e[1]],t++):4===t&&a>1?(e=[+e[0],+e.substring(1)],t++):3===t&&a>=3?(e=[+e[0],+e[1],+e.substring(2)],t+=2):e=[+e],{val:e,valueIndex:t}};function ve(e){if("path"===e.nodeName.toLowerCase())return e;let t=function(e,t=!1){let a,l,n,r,s,i,p,u,h,o,y,c,x,g,f,d,v=[],m=e.nodeName;const M=(e,t=9)=>{const a="svg"!==e.nodeName?e.closest("svg"):e,l=e=>{if(null===e)return 0;let a=96,l=e.match(/([a-z]+)/gi);l=l?l[0]:"";let n,r=parseFloat(e);if(!l)return r;switch(l){case"in":n=a;break;case"pt":n=1/72*96;break;case"cm":n=1/2.54*96;break;case"mm":n=1/2.54*96/10;break;case"em":case"rem":n=16;break;default:n=1}return+(r*n).toFixed(t)};let n=a.getAttribute("width");n=n?l(n):300;let r=a.getAttribute("height");r=n?l(r):150;let s=a.getAttribute("viewBox");s=s?s.replace(/,/g," ").split(" ").filter(Boolean).map(e=>+e):[];let i=s.length?s[2]:n,p=s.length?s[3]:r,u=i/100,h=p/100,o=Math.sqrt((Math.pow(u,2)+Math.pow(h,2))/2),y=["x","width","x1","x2","rx","cx","r"],c=["y","height","y1","y2","ry","cy"];e.getAttributeNames().forEach(t=>{let a=e.getAttribute(t),n=a;if(y.includes(t)||c.includes(t)){let r=y.includes(t)?u:h;r="r"===t&&i!=p?o:r;let s=a.match(/([a-z|%]+)/gi);s=s?s[0]:"",n=a.includes("%")?parseFloat(a)*r:l(a),e.setAttribute(t,+n)}})};M(e);const b=t=>(a={},t.forEach(t=>{a[t]=+e.getAttribute(t)}),a);switch(m){case"path":n=e.getAttribute("d"),v=ye(n);break;case"rect":l=["x","y","width","height","rx","ry"],({x:r,y:s,width:i,height:p,rx:h,ry:o}=b(l)),h||o?(h>i/2&&(h=i/2),o>p/2&&(o=p/2),v=[{type:"M",values:[r+h,s]},{type:"L",values:[r+i-h,s]},{type:"A",values:[h,o,0,0,1,r+i,s+o]},{type:"L",values:[r+i,s+p-o]},{type:"A",values:[h,o,0,0,1,r+i-h,s+p]},{type:"L",values:[r+h,s+p]},{type:"A",values:[h,o,0,0,1,r,s+p-o]},{type:"L",values:[r,s+o]},{type:"A",values:[h,o,0,0,1,r+h,s]},{type:"Z",values:[]}]):v=[{type:"M",values:[r,s]},{type:"L",values:[r+i,s]},{type:"L",values:[r+i,s+p]},{type:"L",values:[r,s+p]},{type:"Z",values:[]}];break;case"circle":case"ellipse":l=["cx","cy","rx","ry","r"],({cx:y,cy:c,r:u,rx:h,ry:o}=b(l));let t="circle"===m;t?(h=u,o=u):(h=h||u,o=o||u);let a=t&&u>=1?1:h,M=t&&u>=1?1:h;v=[{type:"M",values:[y+h,c]},{type:"A",values:[a,M,0,1,1,y-h,c]},{type:"A",values:[a,M,0,1,1,y+h,c]}];break;case"line":l=["x1","y1","x2","y2"],({x1:x,y1:f,x2:g,y2:d}=b(l)),v=[{type:"M",values:[x,f]},{type:"L",values:[g,d]}];break;case"polygon":case"polyline":let A=e.getAttribute("points").replaceAll(","," ").split(" ").filter(Boolean);for(let e=0;e<A.length;e+=2)v.push({type:0===e?"M":"L",values:[+A[e],+A[e+1]]});"polygon"===m&&v.push({type:"Z",values:[]})}return t?function(e){return e.map(e=>`${e.type} ${e.values.join(" ")}`).join(" ")}(v):v}(e),a=t.map(e=>`${e.type} ${e.values} `).join(" "),l=[...e.attributes].map(e=>e.name),n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",a);let r=["x","y","cx","cy","dx","dy","r","rx","ry","width","height","points"];return l.forEach(t=>{if(!r.includes(t)){let a=e.getAttribute(t);n.setAttribute(t,a)}}),n}function me(e,{tolerance:t=1,flatBezierToLinetos:a=!0}={}){let l=[e[0]],n={x:e[0].values[0],y:e[0].values[1]},r=n,s=n;e[e.length-1].type.toLowerCase();for(let i=1,p=e.length;i<p;i++){let u=e[i],h=e[i+1]||e[p-1],o="z"===h.type.toLowerCase()?n:{x:h.values[h.values.length-2],y:h.values[h.values.length-1]},{type:y,values:c}=u,x=c.slice(-2);s="Z"!==y?{x:x[0],y:x[1]}:n;let g=o?W([r,s,o],!0):1/0,f=L(r,o),d=g<(f?f/333*t:0),v=!1;if(a||"C"!==y||(d=!1),a&&("C"===y||"Q"===y)){v=K([r,..."C"===y?[{x:c[0],y:c[1]},{x:c[2],y:c[3]}]:"Q"===y?[{x:c[0],y:c[1]}]:[],s],{tolerance:t}),v&&i<p-1&&(y="L",u.type="L",u.values=x)}d&&i<p-1&&"A"!==h.type&&("L"===y||a&&v)||(r=s,"M"===y?(n=s,r=n):"Z"===y&&(r=n),l.push(u))}return l}function Me(e){let t=[];for(let a=0,l=e.length;a<l;a++){let l=e[a];if(!l)continue;let{type:n=null,values:r=[]}=l,s=e[a+1]?e[a+1]:null;"M"!==n&&"m"!==n||s&&(!s||"Z"!==s.type&&"z"!==s.type)?t.push(l):s&&a++}return t}function be(e){let t={x:e[0].values[0],y:e[0].values[1]},a=t,l=[e[0]];for(let n=1,r=e.length;n<r;n++){let r=e[n],s=e[n-1],i=e[n+1]||null,{type:p,values:u}=r,h="m"===s.type.toLowerCase()&&!i,o=u.length;if(a={x:u[o-2],y:u[o-1]},h||"L"!==p||a.x!==t.x||a.y!==t.y){if(!h&&("l"===p||"v"===p||"h"===p)){if("l"===p?"00"===u.join(""):0===u[0])continue}l.push(r),t=a}}return l}function Ae(e){let t=e.length;if(!("z"===e[t-1].type.toLowerCase()))return e;let a=0,l=[];for(let a=0;a<t;a++){let t=e[a],{type:n,values:r}=t,s=r.length;if(s){let e={type:n,x:r[s-2],y:r[s-1],index:0};e.index=a,l.push(e)}}return l=l.sort((e,t)=>+e.y.toFixed(3)-+t.y.toFixed(3)),a=l[0].index,a?we(e,a):e}function Ce(e,{removeFinalLineto:t=!0,autoClose:a=!0}={}){let l=[],n=e.length,r={x:+e[0].values[0].toFixed(8),y:+e[0].values[1].toFixed(8)},s="z"===e[n-1].type.toLowerCase(),i=e.filter(e=>"L"===e.type),p=e[s?n-2:n-1],u=p.type,h=p.values.slice(-2).map(e=>+e.toFixed(8)),o=h[0]===r.x&&h[1]===r.y;!s&&a&&o&&(e.push({type:"Z",values:[]}),s=!0,n++);let y="L"!==e[1].type&&(!o||"L"===p.type);if(y=!1,!s)return e;let c=0;{let t=[];for(let a=0;a<n;a++){let l=e[a],{type:n,values:r}=l;if(r.length){let l=r.slice(-2),s=e[a-1]&&"L"===e[a-1].type,i=e[a+1]&&"L"===e[a+1].type,p=e[a-1]?e[a-1].type.toUpperCase():null,u=e[a+1]?e[a+1].type.toUpperCase():null,h={type:n,x:l[0],y:l[1],dist:0,index:0,prevL:s,nextL:i,prevCom:p,nextCom:u};h.index=a,t.push(h)}}if(i.length){let e=t.filter(e=>"L"!==e.type&&"M"!==e.type&&e.prevCom&&"L"===e.prevCom||"M"===e.prevCom&&"L"===u).sort((e,t)=>e.y-t.y||e.x-t.x)[0];c=e?e.index-1:0}else t=t.sort((e,t)=>+e.y.toFixed(8)-+t.y.toFixed(8)||e.x-t.x),c=t[0].index;e=c?we(e,c):e}return r={x:+e[0].values[0].toFixed(8),y:+e[0].values[1].toFixed(8)},n=e.length,p=e[n-2],u=p.type,h=p.values.slice(-2).map(e=>+e.toFixed(8)),o="L"===u&&h[0]===r.x&&h[1]===r.y,t&&o&&e.splice(n-2,1),l.push(...e),l}function we(e,t){let a=0,l="z"===e[e.length-1].type.toLowerCase();if(!l||t<1||e.length<3)return e;let n=l?1:0;!function(e){let t=e.length,a="z"===e[t-1].type.toLowerCase(),l=e[0],[n,r]=[l.values[0],l.values[1]].map(e=>+e.toFixed(8)),s=a?e[t-2]:e[t-1],i=s.values.length,[p,u]=[s.values[i-2],s.values[i-1]].map(e=>+e.toFixed(8));!a||n==p&&r==u||(e.pop(),e.push({type:"L",values:[n,r]},{type:"Z",values:[]}))}(e),a=t+1<e.length-1?t+1:e.length-1-n;let r,s,i=e.slice(a),p=e.slice(0,a);return p.shift(),r=p[p.length-1].values||[],s=[r[r.length-2],r[r.length-1]],n&&(i.pop(),p.push({type:"Z",values:[]})),e=[{type:"M",values:s},...i,...p]}function Le(e,{threshold:t=null,tolerance:a=1}={}){if(!t){let a=function(e){let t=1/0,a=-1/0,l=1/0,n=-1/0;const r=e=>{e.x<t&&(t=e.x),e.x>a&&(a=e.x),e.y<l&&(l=e.y),e.y>n&&(n=e.y)};for(let t=0;t<e.length;t++){let a=e[t],{type:l,values:n}=a,s=n.length,i=(e[t-1]?e[t-1]:e[t]).values,p=i.length;if(s){let e={x:i[p-2],y:i[p-1]},t={x:n[s-2],y:n[s-1]};if(r(t),"C"===l||"Q"===l){let a={x:n[0],y:n[1]},s="C"===l?{x:n[2],y:n[3]}:a,i="C"===l?[e,a,s,t]:[e,a,t];T(i).forEach(e=>{let t=S(i,e);r(t)})}else"A"===l&&q(e,n).forEach(e=>{r(e)})}}return{x:t,y:l,width:a-t,height:n-l}}(e);t=.05*(a.width+a.height)}let l=e.length;for(let n=0;n<l;n++){let l=e[n],{type:r,values:s,extreme:i,corner:p=!1,dimA:u,p0:h,p:o}=l,y=e[n+1]?e[n+1]:null,c=e[n+2]?e[n+2]:null,x=(y?B(o,y.p):1/0)<t,g=(c?B(c.p,y.p):1/0)<1*t;if(y&&c&&"C"===r&&"C"===y.type&&i&&c.extreme&&(g||x)){let l=X(y,c,t,a,!1);if(1===l.length){l=l[0],e[n+1]=null,e[n+2].values=[l.cp1.x,l.cp1.y,l.cp2.x,l.cp2.y,l.p.x,l.p.y],e[n+2].cp1=l.cp1,e[n+2].cp2=l.cp2,e[n+2].p0=l.p0,e[n+2].p=l.p,e[n+2].extreme=l.extreme,n++;continue}}if(y&&"C"===r&&"C"===y.type&&i&&x){let e=W([l.p0,l.p,y.p]),t=W([l.p0,l.cp1,l.cp2,l.p]);if(e<0&&t>0||e>0&&t<0)continue}}l=(e=e.filter(Boolean)).length;let n="z"===e[l-1].type.toLowerCase()?l-2:l-1,r=e[n],s=e[n-1]||null,i={x:e[0].values[0],y:e[0].values[1]},p=r.values.slice(-2),u=+p[0].toFixed(8)===+i.x.toFixed(8)&&+p[1].toFixed(8)===+i.y.toFixed(8),h="C"===e[1].type&&e[1].extreme?e[1]:null,o=B(r.p0,r.p)<t;if(s&&"C"===s.type&&o&&u&&h){let l=X(s,r,t,a,!1);1===l.length&&(e[n-1]=l[0],e[n]=null,e=e.filter(Boolean))}return e}function Pe(e){let t=(new XMLSerializer).serializeToString(e);return t=t.replace(/\t/g,"").replace(/[\n\r|]/g,"\n").replace(/\n\s*\n/g,"\n").replace(/ +/g," "),t}function Se(e,{threshold:t=0,tolerance:a=1}={}){let l=e.length,n=[e[0]],r="z"===e[l-1].type.toLowerCase(),s=!!r&&(e[l-1].p.x===e[0].p0.x&&e[l-1].p.y===e[0].p0.y),i=r?2:1,p=e[l-i],u="L"===p.type,h="C"===p.type,o="L"===e[1].type,y="C"===e[1].type,c=r&&y&&(u||s);c&&(e[l-1].values=e[0].values,e[l-1].type="L",u=!0);for(let t=1;t<l;t++){let s=e[t],{type:p}=s,x=e[t+1]?e[t+1]:null;if("L"===p&&x&&"C"===x.type||"C"===p&&x&&"L"===x.type){let c="L"===p?s:null,g=null,f=[],d=0;if(1===t&&y&&u&&(f=[e[1]],c=e[l-1],g=x),!c){n.push(s);continue}r&&h&&o&&t===l-i-1&&(g=e[1],f=[e[l-i]]);for(let a=t+1;a<l;a++){let t=e[a]?e[a]:null,l=e[a-1];if("C"===l.type&&f.push(l),"L"===t.type&&"C"===l.type){g=t;break}d++}if(g){let e=B(c.p0,c.p),l=B(g.p0,g.p);f.length;let r=B(c.p,g.p0),i=W([c.p0,c.p,g.p0,g.p],!1),p=W([f[0].p0,f[0].cp1,f[0].cp2,f[0].p],!1),u=i<0&&p>0||i>0&&p<0,h=.5*r*a,o=h<e&&h<l;if(f.length&&!u&&o){let e=Math.abs(p)<=.005*L(f[0].p0,f[0].p),a=e?null:C(c.p0,c.p,g.p0,g.p,!1);if(!e&&a){let e=.75*B(S([c.p,a,g.p0],.5),1===f.length?S([f[0].p0,f[0].cp1,f[0].cp2,f[0].p],.5):f[0].p);if(h&&e>h&&e>.3*r){n.push(s);continue}{let e={type:"Q",values:[a.x,a.y,g.p0.x,g.p0.y]};e.p0=c.p,e.cp1=a,e.p=g.p0,n.push(c,e),t+=d;continue}}}}}c&&t===l-1&&"L"===p||n.push(s)}return(c||r&&"Z"!==n[n.length-1].type)&&n.push({type:"Z",values:[]}),n}function Ee(e){if(e.length<3)return!1;let t=e[0],a=e[Math.floor(e.length/2)],l=e[e.length-1],n=t.x,r=t.y,s=a.x,i=a.y,p=l.x,u=l.y,h=n-s,o=r-i,y=n-p,c=r-u,x=(n*n-s*s+(r*r-i*i))/2,g=(n*n-p*p+(r*r-u*u))/2,f=h*c-o*y;if(Math.abs(f)<1e-10)return console.warn("Points are collinear or numerically unstable"),!1;let d={x:(c*x-o*g)/f,y:(-y*x+h*g)/f},v=w(d,t),m=A(d,t,l),{deltaAngle:M,startAngle:b,endAngle:C}=m;return{centroid:d,r:v,startAngle:b,endAngle:C,deltaAngle:M}}function ke(e,{threshold:a=0,tolerance:l=1,toCubic:n=!1,debug:r=!1}={}){let s=e.length,i=[e[0]],p=[];for(let a=1;a<s;a++){let l=e[a],{type:s}=l,u=e[a-1],h=e[a+1]?e[a+1]:null,o=e[a+2]?e[a+2]:null,y=e[a+3]?e[a+3]:null,c=null;"C"===l.type||"Q"===l.type?c=l:!h||"C"!==h.type&&"Q"!==h.type||(c=h);let x,g,f,d,v,m=c?"C"===c.type?[c.p0,c.cp1,c.cp2,c.p]:[c.p0,c.cp1,c.p]:[],M=0,b=0,A=!1,C=!1,w=[];if("L"===u.type&&"L"===s&&c&&"L"===o.type&&y&&("L"===y.type||"Z"===y.type)?(x=[l.p0,l.p],g=[o.p0,o.p],f=l.p0,d=o.p,M=W(m,!1),b=W([...x,...g],!1),A=M<0&&b>0||M>0&&b<0,A||(v=S(m,.5),w=[f,v,d],C=!0)):"C"!==s&&"Q"!==s||"L"!==u.type||"C"!==h.type&&"Q"!==h.type||"L"!==o.type||(C=!0,x=[u.p0,u.p],g=[o.p0,o.p],f=u.p,d=o.p0,v=c.p,w=[f,c.p,d]),C){let e=Ee(w);if(e){let s,{centroid:u,r:h,deltaAngle:o,startAngle:y,endAngle:c}=e,x=0,g=o>0?1:0,m=Math.abs(o)>Math.PI?1:0;if(Q(I(f,u.x,u.y,.5*o),v)<.05*Q(f,d)){if(s=he({p0:f,p:d,centroid:u,rx:h,ry:h,xAxisRotation:x,sweep:g,largeArc:m,deltaAngle:o,startAngle:y,endAngle:c}),1===s.length){let e=ae(f,s[0].cp1,s[0].cp2,d);"Q"===e.type&&(n=!0),l=e}if(s.length>1&&(n=!1),n||(l.type="A",l.values=[h,h,x,m,g,d.x,d.y]),l.p0=f,l.p=d,l.extreme=!1,l.corner=!1,r){p=n?[{type:"M",values:[f.x,f.y]},...s]:[{type:"M",values:[f.x,f.y]},{type:"A",values:[h,h,x,m,g,d.x,d.y]}];let e=J(p);t(markers,e,"orange","0.5%","0.5")}i.push(l),a++;continue}}}i.push(l)}return i}function Ie(e=[],{threshold:t=0}={}){let a=e.length,l="z"===e[a-1].type.toLowerCase(),n=l?a-2:a-1,r=e[n],s=r.values.slice(-2),i={x:e[0].values[0],y:e[0].values[1]},p=Q(i,{x:s[0],y:s[1]});if(p&&p<t){let a=e[n].values.length;e[n].values[a-2]=i.x,e[n].values[a-1]=i.y;let l=e[1];if("C"===l.type&&"C"===r.type){let a=Math.abs(l.values[0]-r.values[2]),s=Math.abs(l.values[1]-r.values[3]),p=Math.abs(e[1].values[0]-l.values[0]),u=Math.abs(e[1].values[1]-l.values[1]),h=Math.abs(e[1].values[0]-r.values[2]),o=Math.abs(e[1].values[1]-r.values[3]),y=u<t&&o<t&&a;a&&a<t&&(p<t&&h<t&&s)&&(e[1].values[0]=i.x,e[n].values[2]=i.x),s&&s<t&&y&&(e[1].values[1]=i.y,e[n].values[3]=i.y)}}return e}function Fe(e,t=1){let a=[];for(let l=0,n=e.length;l<n;l++){let n=e[l],{type:r,values:s}=n,i={type:r,values:[]};switch(r.toLowerCase()){case"h":case"v":i.values=[s[0]*t];break;case"a":i.values=[s[0]*t,s[1]*t,s[2],s[3],s[4],s[5]*t,s[6]*t];break;default:s.length&&(i.values=s.map((e,a)=>e*t))}a.push(i)}return a}function $e(e,{tolerance:t=1}={}){return e.length,e}function De(e){for(let t=1,a=e.length;t<a;t++){let a=e[t],{type:l,values:n,p0:r,cp1:s=null,cp2:i=null,p:p=null}=a;if("C"===l){let l=ae(r,s,i,p);"Q"===l.type&&(l.extreme=a.extreme,l.corner=a.corner,l.dimA=a.dimA,l.squareDist=a.squareDist,e[t]=l)}}return e}function Te(e,{areaThreshold:t=1.5}={}){for(let a=0,l=e.length;a<l;a++){let l=e[a],n=e[a+1]||null,{type:r,values:s,p0:i,cp1:p=null,cp2:u=null,p:h=null}=l;if("C"===r&&"C"===n.type){let l=qe(i,p,u,h,t),r=qe(n.p0,n.cp1,n.cp2,n.p,t);if(l.isArc&&r.isArc){let t=.01*B(i,n.p),s=Math.abs(n.p.x-i.x),p=Math.abs(n.p.y-i.y),u=p<t&&s>t,o=s<t&&p>t,{rx:y,ry:c}=l,x=W([i,h,n.p])<0?0:1;if(o||u){y=Math.min(y,r.rx),c=Math.min(c,r.ry),e[a]=null,e[a+1].type="A",e[a+1].values=[y,c,0,0,x,n.p.x,n.p.y];continue}}}}return e=e.filter(Boolean)}function qe(e,t,a,l,n=7.5){let r,s={type:"C",values:[t.x,t.y,a.x,a.y,l.x,l.y]},i=0,p=!1,u=b(e,t,!0),h=b(l,a,!0),o=180*Math.abs(u-h)/Math.PI,y=0,c=0;if(Math.abs(o%180-90)<3){r=C(e,I(t,e.x,e.y,-.5*Math.PI),l,I(a,l.x,l.y,.5*Math.PI),!1);let u=C(e,t,l,a,!1);if(u){let r=w(e,u),h=w(l,u),o=+Math.max(r,h).toFixed(8),x=+Math.min(r,h).toFixed(8);y=x,c=o;let g=W([e,t,a,l])<0?0:1,f=Math.abs(l.x-e.x)>Math.abs(l.y-e.y);100/y*Math.abs(y-c)<5&&(y=o,c=y),f&&(y=o,c=x);let d=V([{type:"M",values:[e.x,e.y]},{type:"C",values:[t.x,t.y,a.x,a.y,l.x,l.y]}]),v={type:"A",values:[y,c,0,0,g,l.x,l.y]};i=Math.PI*(y*c)/4,i-=Math.abs(W([e,l,u])),function(e,t){let a=Math.abs(e-t);return Math.abs(100-100/e*(e+a))}(d,i)<n&&(p=!0,s=v)}}return{com:s,isArc:p,area:i,rx:y,ry:c,centroid:r}}function ze(e="",{getObject:t=!1,toAbsolute:a=!0,toRelative:l=!0,toShorthands:n=!0,quadraticToCubic:r=!0,arcToCubic:s=!1,cubicToArc:i=!1,simplifyBezier:p=!0,optimizeOrder:u=!0,autoClose:h=!0,removeZeroLength:o=!0,refineClosing:y=!0,removeColinear:c=!0,flatBezierToLinetos:x=!0,revertToQuadratics:g=!0,refineExtremes:f=!0,simplifyCorners:d=!1,keepExtremes:v=!0,keepCorners:m=!0,extrapolateDominant:M=!0,keepInflections:b=!1,addExtremes:A=!1,addSemiExtremes:C=!1,removeOrphanSubpaths:w=!1,simplifyRound:L=!1,scale:P=1,scaleTo:S=0,crop:k=!1,alignToOrigin:I=!1,decimals:F=3,autoAccuracy:$=!0,minifyD:D=0,tolerance:T=1,reverse:q=!1,mergePaths:z=!1,removeHidden:Q=!0,removeUnused:B=!0,shapesToPaths:Z=!0,tMin:N=0,tMax:H=1,redraw:U=!1}={}){T=Math.max(.1,T),P=Math.max(.001,P);let V=function(e){let t="string";if(Array.isArray(e))return e[0]?.type&&e[0]?.values?"pathData":"array";if("string"==typeof e){let a=(e=e.trim()).includes("<svg")&&e.includes("</svg"),l=e.startsWith("M")||e.startsWith("m"),n=!isNaN(e.substring(0,1))&&!isNaN(e.substring(e.length-1,e.length));if(a)t="svgMarkup";else if(l)t="pathDataString";else if(n)t="polyString";else{let a=/^(file:|https?:\/\/|\/|\.\/|\.\.\/)/.test(e),l=e.startsWith("data:image");t=a||l?"url":"string"}return t}return t=typeof e,(e.constructor.name||t).toLowerCase()}(e),W="",X=0,G=0,K=0,te={},ae="",ne="svgMarkup"===V?1:0,re=[];X=e.length;let se={x:0,y:0,width:0,height:0},ie={x:0,y:0,width:0,height:0},pe=[],ue=[];if(ne){if(W=function(e,{returnDom:t=!1,removeHidden:a=!0,removeUnused:l=!0}={}){e=(e=e.replace(/<\?xml[\s\S]*?\?>/gi,"").replace(/<!DOCTYPE[\s\S]*?>/gi,"").replace(/<!--[\s\S]*?-->/g,"").trim()).replaceAll("xlink:href=","href=");let n=(new DOMParser).parseFromString(e,"text/html").querySelector("svg");!function(e,t=["viewBox","xmlns","width","height","id","class"]){[...e.attributes].map(e=>e.name).forEach(a=>{t.includes(a)||e.removeAttribute(a)})}(n,["viewBox","xmlns","width","height","id","class","fill","stroke","stroke-width","stroke-linecap","stroke-linejoin"]);let r=["metadata","script"];return n.querySelectorAll("*").forEach(e=>{let t=e.nodeName,l=e.getAttribute("style")||"",n=!!l&&l.trim().includes("display:none"),s=e.getAttribute("display")&&"none"===e.getAttribute("display")||n;t.includes(":")||r.includes(t)||a&&s?e.remove():function(e){[...e.attributes].map(e=>e.name).forEach(t=>{t.includes(":")&&e.removeAttribute(t)})}(e)}),t?n:Pe(n)}(e,{returnDom:!0,removeHidden:Q,removeUnused:B}),Z){W.querySelectorAll("polygon, polyline, line, rect, circle, ellipse").forEach(e=>{let t=ve(e);e.replaceWith(t)})}W.querySelectorAll("path").forEach(e=>{re.push({d:e.getAttribute("d"),el:e})}),se=function(e=null,t=-1){const a=e=>e&&isNaN(e)?e.match(/[^\d]+/g)[0]:"";if(!e)return!1;let l=e.hasAttribute("width"),n=e.hasAttribute("height"),r=e.hasAttribute("viewBox"),s=l?e.getAttribute("width"):0,i=n?e.getAttribute("height"):0,p=!!l&&a(s),u=!!n&&a(s),h=s?s.includes("%")?0:parseFloat(s):300,o=i?i.includes("%")?0:parseFloat(i):150,y=r?e.getAttribute("viewBox").split(/,| /).filter(Boolean).map(Number):[0,0,h,o];return t>-1&&([h,o]=[h,o].map(e=>+e.toFixed(t)),y=y.map(e=>+e.toFixed(t))),{x:y[0],y:y[1],width:y[2],height:y[3],w:h,h:o,hasViewBox:r,hasWidth:l,hasHeight:n,widthUnit:p,heightUnit:u}}(W,F)}else{if("pathDataString"===V)ae=e;else if("polyString"===V)ae="M"+e;else if("pathData"===V){ae=e,X=ae.map(e=>`${e.type} ${e.values.join(" ")}`).join(" ").length}re.push({d:ae,el:null})}let he={toRelative:l,toShorthands:n,decimals:F},oe=[];for(let e=0,t=re.length;t&&e<t;e++){let t=re[e],{d:l,el:n}=t,Q=ye(l,{quadraticToCubic:r,toAbsolute:a,arcToCubic:s});if(1!==P||S){if(S)if(se.width&&!k)P=S/se.width;else{let e=Q.map(e=>({type:e.type,values:e.values}));e=le(e,{arcToCubic:!0}),e=R(e);let t=O(E(e));pe.push(t.x,t.x+t.width),ue.push(t.y,t.y+t.height);let a=S/t.width;P=a}Q=Fe(Q,P)}let B=Q.length;w&&(Q=Me(Q));let Z=j(Q),V=Z.length,W=[];for(let e=0;e<V;e++){let t=Z[e];(c||o)&&(t=be(t)),U&&(A=!0,C=!0,d=!1,m=!0,v=!0,u=!0,p=!1,N=0,H=0),u&&(t=Ae(t)),c&&(t=me(t,{tolerance:T,flatBezierToLinetos:!1})),(A||C)&&(t=R(t,{tMin:N,tMax:H,addExtremes:A,addSemiExtremes:C}));let a=_(t,{detectSemiExtremes:C}),{pathData:l,bb:n,dimA:r}=a;if(pe.push(n.x,n.x+n.width),ue.push(n.y,n.y+n.height),y&&(l=Ie(l,{threshold:.001*r})),U&&(l=$e(l,{tolerance:T,threshold:.001*r})),l=p?Y(l,{simplifyBezier:p,keepInflections:b,keepExtremes:v,keepCorners:m,extrapolateDominant:M,revertToQuadratics:g,tolerance:T,reverse:q}):l,f){l=Le(l,{threshold:.05*(n.width+n.height),tolerance:T})}if(i&&(l=Te(l,{areaThreshold:1.5})),c&&x&&(l=me(l,{tolerance:T,flatBezierToLinetos:x})),d){l=Se(l,{threshold:.1*(n.width+n.height),tolerance:T})}L&&(l=ke(l)),g&&(l=De(l)),u&&(l=Ce(l,{autoClose:h})),W.push({pathData:l,bb:n})}let te=Math.min(...pe),ae=Math.min(...ue);ie={x:te,y:ae,width:Math.max(...pe)-te,height:Math.max(...ue)-ae};let ne=ie.height>ie.width;if(u&&(W=ne?W.sort((e,t)=>e.bb.y-t.bb.y||e.bb.x-t.bb.x):W.sort((e,t)=>e.bb.x-t.bb.x||e.bb.y-t.bb.y)),Q=[],W.forEach(e=>{Q.push(...e.pathData)}),$&&(F=ee(Q),he.decimals=F),n&&z)oe.push(...Q);else{Q=le(Q,he),Q=be(Q),I&&(console.log(ie),Q[0].values[0]=(Q[0].values[0]-ie.x).toFixed(F),Q[0].values[1]=(Q[0].values[1]-ie.y).toFixed(F),ie.x=0,ie.y=0);let e=Q.length,a=J(Q,D);G=a.length,K=+(100/X*G).toFixed(2),t.d=a,t.report={original:B,new:e,saved:B-e,compression:K,decimals:F},n&&n.setAttribute("d",a)}}if(ne){if(oe.length){let e=le(oe,he);e=be(e);let t=J(e,D);re[0].el.setAttribute("d",t);for(let e=1;e<re.length;e++){let t=re[e].el;t&&t.remove()}!function(e){e.querySelectorAll("g, defs").forEach(e=>{e.children.length||e.remove()})}(W)}if(P){let{x:e,y:t,width:a,height:l,w:n,h:r,hasViewBox:s,hasWidth:i,hasHeight:p,widthUnit:u,heightUnit:h}=se;k&&(e=ie.x,t=ie.y,a=ie.width,l=ie.height,n=a,r=l),s&&W.setAttribute("viewBox",[e,t,a,l].map(e=>+(e*P).toFixed(F)).join(" ")),i&&W.setAttribute("width",+(n*P).toFixed(F)+u),p&&W.setAttribute("height",+(r*P).toFixed(F)+h)}W=Pe(W),G=W.length,K=+(100/X*G).toFixed(2),X=+(X/1024).toFixed(3),G=+(G/1024).toFixed(3),te={svgSize:X,svgSizeOpt:G,compression:K,decimals:F}}else({d:ae,report:te}=re[0]);return t?{svg:W,d:ae,report:te,inputType:V,mode:ne}:ae||W}const{abs:Qe,acos:Be,asin:je,atan:Ze,atan2:Ne,ceil:Re,cos:Oe,exp:He,floor:Ue,log:Ve,hypot:We,max:Je,min:Xe,pow:Ye,random:Ge,round:Ke,sin:_e,sqrt:et,tan:tt,PI:at}=Math;"undefined"!=typeof window&&(window.svgPathSimplify=ze);export{at as PI,Qe as abs,Be as acos,je as asin,Ze as atan,Ne as atan2,Re as ceil,Oe as cos,He as exp,Ue as floor,We as hypot,Ve as log,Je as max,Xe as min,Ye as pow,Ge as random,Ke as round,_e as sin,et as sqrt,ze as svgPathSimplify,tt as tan};
