const{abs:e,acos:t,asin:l,atan:a,atan2:n,ceil:s,cos:r,exp:u,floor:p,log:i,max:y,min:h,pow:o,random:c,round:x,sin:f,sqrt:g,tan:v,PI:d}=Math;function m(e,t,l=!1){let a=n(t.y-e.y,t.x-e.x);return l&&a<0&&(a+=2*Math.PI),a}function M(e,t,l,a,n=!0){let s,r,u,p,i,y={};try{if(s=(a.y-l.y)*(t.x-e.x)-(a.x-l.x)*(t.y-e.y),0==s)return!1}catch{console.log("!catch",e,t,"p3:",l,a)}r=e.y-l.y,u=e.x-l.x,p=(a.x-l.x)*r-(a.y-l.y)*u,i=(t.x-e.x)*r-(t.y-e.y)*u,r=p/s,u=i/s,y={x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)};let h=!1;return r>0&&r<1&&u>0&&u<1&&(h=!0),!(n&&!h)&&y}function b(e,t){return g((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function C(e,t){return(t.x-e.x)**2+(t.y-e.y)**2}function A(e,t,l,a=!1){let n={x:(t.x-e.x)*l+e.x,y:(t.y-e.y)*l+e.y};return a&&(n.angle=m(e,t),n.angle<0&&(n.angle+=2*d)),n}function w(e,t=.5,l=!1,a=!1){let n;return n=e.length>2?((e,t,l=!1)=>{let n=4===e.length,s=e[0],r=e[1],u=n?e[2]:e[1],p=e[e.length-1],i={x:0,y:0};if(l||a){let e,l,y,h,o,c=s.x===r.x&&s.y===r.y,x=p.x===u.x&&p.y===u.y;0!==t||c?1!==t||x?(c&&(t+=1e-7),x&&(t-=1e-7),e=A(s,r,t),n?(l=A(r,u,t),y=A(u,p,t),h=A(e,l,t),o=A(l,y,t),i=A(h,o,t),i.angle=m(h,o),a&&(i.cpts=[l,y,h,o])):(l=A(s,r,t),y=A(r,p,t),i=A(l,y,t),i.angle=m(l,y),a&&(i.cpts=[l,y]))):(i.x=p.x,i.y=p.y,i.angle=m(u,p)):(i.x=s.x,i.y=s.y,i.angle=m(s,r))}else{let e=1-t;i=n?{x:e**3*s.x+3*e**2*t*r.x+3*e*t**2*u.x+t**3*p.x,y:e**3*s.y+3*e**2*t*r.y+3*e*t**2*u.y+t**3*p.y}:{x:e*e*s.x+2*e*t*r.x+t**2*p.x,y:e*e*s.y+2*e*t*r.y+t**2*p.y}}return i})(e,t,l):A(e[0],e[1],t,l),l&&n.angle<0&&(n.angle+=2*d),n}function L(e,t,l,n,s,u=0,p=!0,i=!1){if(s=i?s*d/180:s,u=i?u*d/180:u,u=l!==n&&u!==2*d?u:0,p&&l!==n){let e=a(v(s=u?s-u:s)*(l/n));s=r(s)<0?e+d:e}let y=e+l*r(s),h=t+n*f(s),o={x:y,y:h};return u&&(o.x=e+(y-e)*r(u)-(h-t)*f(u),o.y=t+(y-e)*f(u)+(h-t)*r(u)),o}function P(e,t=[],l=.05){let a=3===t.length,n=t[0]||null,s=a?t[1]:null,r=a?t[2]:t[1],u=.5*Math.PI,p=!1,i=!1,y=n?m(r,n,!0):null;if(p=Math.abs(y%u)<l||Math.abs(y%u-u)<l,a){let e=s?m(s,r,!0):0;i=Math.abs(e%u)<=l||Math.abs(e%u-u)<=l}return p||i}function S(e){return 4===e.length?function(e,t,l,a){let[n,s,r,u,p,i,y,h]=[e.x,e.y,t.x,t.y,l.x,l.y,a.x,a.y],o=Math.min(e.y,a.y),c=Math.min(e.x,a.x),x=Math.max(e.x,a.x),f=Math.max(e.y,a.y);if(t.y>=o&&t.y<=f&&l.y>=o&&l.y<=f&&t.x>=c&&t.x<=x&&l.x>=c&&l.x<=x)return[];let g,v,d,m,M,b,C,A,w=[];for(let e=0;e<2;++e)if(0==e?(v=6*n-12*r+6*p,g=-3*n+9*r-9*p+3*y,d=3*r-3*n):(v=6*s-12*u+6*i,g=-3*s+9*u-9*i+3*h,d=3*u-3*s),Math.abs(g)<1e-12){if(Math.abs(v)<1e-12)continue;m=-d/v,0<m&&m<1&&w.push(m)}else C=v*v-4*d*g,C<0?Math.abs(C)<1e-12&&(m=-v/(2*g),0<m&&m<1&&w.push(m)):(A=Math.sqrt(C),M=(-v+A)/(2*g),0<M&&M<1&&w.push(M),b=(-v-A)/(2*g),0<b&&b<1&&w.push(b));let L=w.length;for(;L--;)m=w[L];return w}(e[0],e[1],e[2],e[3]):function(e,t,l){let a,n,s,r=Math.min(e.y,l.y),u=Math.min(e.x,l.x),p=Math.max(e.x,l.x),i=Math.max(e.y,l.y);if(t.y>=r&&t.y<=i&&t.x>=u&&t.x<=p)return[];let[y,h,o,c,x,f]=[e.x,e.y,t.x,t.y,l.x,l.y],g=[];for(let e=0;e<2;++e)a=0==e?y-2*o+x:h-2*c+f,n=0==e?-2*y+2*o:-2*h+2*c,Math.abs(a)>1e-12&&(s=-n/(2*a),s>0&&s<1&&g.push(s));return g}(e[0],e[1],e[2])}function k(e,t=.025){let l=e[0],a=e[e.length-1],n=e.map(e=>e.x),s=e.map(e=>e.y),r=Math.min(...n),u=Math.max(...n),p=Math.min(...s),i=u-r,y=Math.max(...s)-p;if(e.length<3||0===i||0===y)return{area:0,flat:!0,thresh:1e-4,ratio:0};let h=C(l,a),o=C(l,e[0]),c=(o+(e.length>3?C(a,e[1]):o))/2;let x=.5*(i+y)*.5,f=0;for(let t=0,l=e.length;t<l;t++){f+=e[t].x*e[t===e.length-1?0:t+1].y*.5-e[t===e.length-1?0:t+1].x*e[t].y*.5}f=+Math.abs(f).toFixed(9);return{area:f,flat:0===f||f<c/1e3,thresh:x,ratio:f/c,squareDist:h,areaThresh:h/1e3}}function I(e,t,l){let a=!1,n=2===t.length,s=t[0],r=n?t[1]:s;if(e.x===s.x&&e.y===s.y&&l.x===r.x&&l.y===r.y)return!0;let u=s.x-e.x,p=s.y-e.y,i=l.x-r.x,y=l.y-r.y,h=Math.abs(u*y-p*i);if(!h)return!0;let o=l.x-e.x,c=l.y-e.y,x=Math.abs(o*p-c*u);return!x||(x/h<1.1&&(a=!0),a)}function F(e,t){return(Math.abs(t.x-e.x)+Math.abs(t.y-e.y))/2}function z(e){let t=[];try{e.map((e,t)=>"m"===e.type.toLowerCase()?t:-1).filter(e=>-1!==e)}catch{console.log("catch",e)}let l=e.map((e,t)=>"m"===e.type.toLowerCase()?t:-1).filter(e=>-1!==e);return 1===l.length?[e]:(l.forEach((a,n)=>{t.push(e.slice(a,l[n+1]))}),t)}function E(e,t){let l,a,n,s,r,u,p=[],i=[],y=e[0],h=e[1],o=e[e.length-2],c=e[e.length-1];return 4===e.length?(l=w([y,h],t),a=w([h,o],t),n=w([o,c],t),s=w([l,a],t),r=w([a,n],t),u=w([s,r],t),p.push({x:y.x,y:y.y},{x:l.x,y:l.y},{x:s.x,y:s.y},{x:u.x,y:u.y}),i.push({x:u.x,y:u.y},{x:r.x,y:r.y},{x:n.x,y:n.y},{x:c.x,y:c.y})):3===e.length?(a=w([y,h],t),n=w([h,c],t),u=w([a,n],t),p.push({x:y.x,y:y.y},{x:a.x,y:a.y},{x:u.x,y:u.y}),i.push({x:u.x,y:u.y},{x:n.x,y:n.y},{x:c.x,y:c.y})):2===e.length&&(a=w([y,c],t),p.push({x:y.x,y:y.y},{x:a.x,y:a.y}),i.push({x:a.x,y:a.y},{x:c.x,y:c.y})),[p,i]}function Q(e,t,l=0,a=1){let n=[],s=6===t.length?"C":"Q",r={x:t[0],y:t[1]},u="C"===s?{x:t[2],y:t[3]}:r,p={x:t[4],y:t[5]},i=Math.max(p.x,e.x),y=Math.min(p.x,e.x),h=Math.max(p.y,e.y),o=Math.min(p.y,e.y),c=0;if(r.x<y||r.x>i||r.y<o||r.y>h||u.x<y||u.x>i||u.y<o||u.y>h){let i=S("C"===s?[e,r,u,p]:[e,r,p]).sort();if(i=i.filter(e=>e>l&&e<a),i.length){let l=function(e,t,l,a=!0){let n=[];if(!l.length)return!1;let s,r,u,p=t.length,i={x:t[p-2],y:t[p-1]};2===t.length?u=[e,i]:4===t.length?(s={x:t[0],y:t[1]},u=[e,s,i]):6===t.length&&(s={x:t[0],y:t[1]},r={x:t[2],y:t[3]},u=[e,s,r,i]);if(l.length)if(1===l.length){let e=E(u,l[0]),t=e[0],a=e[1];n.push(t,a)}else{let e=l[0],t=E(u,e),a=t[0];n.push(a),u=t[1];for(let t=1;t<l.length;t++){e=l[t-1];let a=E(u,(l[t]-e)/(1-e));n.push(a[0]),t===l.length-1&&n.push(a[a.length-1]),u=a[1]}}if(a){let e,t,l=[];return n.forEach(a=>{e={type:"",values:[]},a.shift(),t=a.map(e=>Object.values(e)).flat(),e.values=t,3===a.length?e.type="C":2===a.length?e.type="Q":1===a.length&&(e.type="L"),l.push(e)}),l}return n}(e,t,i);n.push(...l),c+=l.length}else n.push({type:s,values:t})}else n.push({type:s,values:t});return{pathData:n,count:c}}function T(e,t=0,l=1){let a=[e[0]],n={x:e[0].values[0],y:e[0].values[1]},s={x:e[0].values[0],y:e[0].values[1]},r=e.length;for(let u=1;r&&u<r;u++){let r=e[u],{type:p,values:i}=r,y=i.slice(-2);if(y[0],y[1],"C"!==p&&"Q"!==p)a.push(r);else if("C"===p||"Q"===p){let e=Q(n,i,t,l).pathData;a.push(...e)}n={x:y[0],y:y[1]},"z"===p.toLowerCase()?n=s:"M"===p&&(s={x:y[0],y:y[1]})}return a}function $(e,t=-1){let l=e.map(e=>e.x),a=e.map(e=>e.y),n=Math.min(...l),s=Math.max(...l),r=Math.min(...a),u=Math.max(...a),p={x:n,left:n,right:s,y:r,top:r,bottom:u,width:s-n,height:u-r};if(t>-1)for(let e in p)p[e]=+p[e].toFixed(t);return p}function q(e){let t=[];return e.forEach(e=>{let l=function(e){let t=function(e){let t=[];for(let l=0;l<e.length;l++){let a=e[l],n=l>0?e[l-1]:e[l],{type:s,values:r}=a,u={x:n.values[n.values.length-2],y:n.values[n.values.length-1]},p=r.length?{x:r[r.length-2],y:r[r.length-1]}:"",i=r.length?{x:r[0],y:r[1]}:"";switch(s){case"A":if("function"!=typeof arcToBezier){let e=b(u,p)/2,l=A(u,p,.5),a=L(l.x,l.y,e,e,0),n=L(l.x,l.y,e,e,Math.PI);t.push(a,n,p);break}arcToBezier(u,r).forEach(e=>{let l=e.values,a={x:l[0],y:l[1]},n={x:l[2],y:l[3]},s={x:l[4],y:l[5]};t.push(a,n,s)});break;case"C":let e={x:r[2],y:r[3]};t.push(i,e);break;case"Q":t.push(i)}"z"!==s.toLowerCase()&&t.push(p)}return t}(e),l=$(t);return l}(e);t.push(l)}),t}function D(e,t){let[l,a,n,s,r,u]=[e.x,e.y,e.width,e.height,e.x+e.width,e.y+e.height],[p,i,y,h,o,c]=[t.x,t.y,t.width,t.height,t.x+t.width,t.y+t.height],x=!1;return n*s!=y*h&&n*s>y*h&&l<p&&r>o&&a<i&&u>c&&(x=!0),x}function O(t,l=9){let a=0,s=[],u=z(t),p=u.length>1,i=[];if(p){let e=q(u);e.forEach(function(t,l){for(let l=0;l<e.length;l++){let a=e[l];if(t!=a){D(t,a)&&i.push(l)}}})}return u.forEach((t,l)=>{s=[];let u=0,p=0,y=1,h=[];t.forEach(function(l,a){let[p,i]=[l.type,l.values],y=i.length;if(i.length){let o=(a>0?t[a-1]:t[0]).values,c=o.length,x={x:o[c-2],y:o[c-1]},v={x:i[y-2],y:i[y-1]};if("C"===p||"Q"===p){let e={x:i[0],y:i[1]};h="C"===p?[x,e,{x:i[2],y:i[3]},v]:[x,e,v];let t=Math.abs(function(e,t=!1){let l,[a,n,s,r]=[e[0],e[1],e[2],e[e.length-1]];if(e.length<3)return 0;3===e.length&&(n={x:1*e[0].x/3+2*e[1].x/3,y:1*e[0].y/3+2*e[1].y/3},s={x:1*e[2].x/3+2*e[1].x/3,y:1*e[2].y/3+2*e[1].y/3});return l=3*(a.x*(-2*n.y-s.y+3*r.y)+n.x*(2*a.y-s.y-r.y)+s.x*(a.y+n.y-2*r.y)+r.x*(-3*a.y+n.y+2*s.y))/20,t?Math.abs(l):l}(h));u+=t,s.push(x,v)}else if("A"===p){let t=function(t,l,a,s,u,p,i,y,h){const o=(e,t,l,a)=>n(a-t,l-e);let c={cx:0,cy:0,rx:a=e(a),ry:s=e(s),startAngle:0,endAngle:0,deltaAngle:0,clockwise:i,xAxisRotation:u,largeArc:p,sweep:i};if(0==a||0==s)throw Error("rx and ry can not be 0");if(a===s){let e=Math.abs(y-t),a=Math.abs(h-l),n=e,s=Math.min(t,y),r=Math.min(l,h),u=.5*Math.PI;if(0===e&&a||0===a&&e)return n=0===e&&a?a/2:e/2,c.rx=n,c.ry=n,0===e&&a?(c.cx=t,c.cy=r+a/2,c.startAngle=l>h?u:-u,c.endAngle=l>h?-u:u,c.deltaAngle=i?Math.PI:-Math.PI):0===a&&e&&(c.cx=s+e/2,c.cy=l,c.startAngle=t>y?Math.PI:0,c.endAngle=t>y?-Math.PI:Math.PI,c.deltaAngle=i?Math.PI:-Math.PI),c}let x,v,m=a===s?0:u*d/180,M=m?f(m):0,b=m?r(m):1,C=(t-y)/2,A=(l-h)/2,w=(t+y)/2,L=(l+h)/2,P=m?b*C+M*A:C,S=m?b*A-M*C:A,k=P*P/(a*a)+S*S/(s*s);k>1&&(a*=g(k),s*=g(k),c.rx=a,c.ry=s);let I=a*s,F=a*S,z=s*P,E=F**2+z**2;if(!E)throw Error("start point can not be same as end point");let Q=g(e((I*I-E)/E));p==i&&(Q=-Q);let T=Q*F/s,$=-Q*z/a;x=m?b*T-M*$+w:w+T,v=m?M*T+b*$+L:L+$,c.cy=v,c.cx=x;let q=o(x,v,t,l),D=o(x,v,y,h);!i&&D>q&&(D-=2*Math.PI),i&&q>D&&(D=D<=0?D+2*Math.PI:D);let O=D-q;return c.startAngle=q,c.endAngle=D,c.deltaAngle=O,c}(x.x,x.y,l.values[0],l.values[1],l.values[2],l.values[3],l.values[4],v.x,v.y),{cx:a,cy:p,rx:i,ry:y,startAngle:h,endAngle:o,deltaAngle:c}=t,m=Math.abs(function(e,t,l,a){const n=Math.PI*e*t;let s=(a-l+2*Math.PI)%(2*Math.PI);if(e===t)return n*(s/(2*Math.PI));const r=l=>Math.atan2(e*Math.sin(l),t*Math.cos(l));return l=r(l),a=r(a),s=(a-l+2*Math.PI)%(2*Math.PI),n*(s/(2*Math.PI))}(i,y,h,o));m-=Math.abs(N([x,{x:a,y:p},v])),s.push(x,v),u+=m}else s.push(x,v)}});let o=N(s);-1!==i.indexOf(l)&&(y=-1),p=o<0&&u<0?(Math.abs(u)-Math.abs(o))*y:(Math.abs(u)+Math.abs(o))*y,a+=p}),a}function N(e,t=!1){let l=0;for(let t=0,a=e.length;a&&t<a;t++){l+=e[t].x*e[t===e.length-1?0:t+1].y*.5-e[t===e.length-1?0:t+1].x*e[t].y*.5}return t&&(l=Math.abs(l)),l}function j(e,t=0){t=parseFloat(t);let l=e.length,a=t>1,n=!a&&!t,s="",r=a?"\n":n?"":" ",u=n?"":" ";s=`${e[0].type}${u}${e[0].values.join(" ")}${r}`;for(let t=1;t<l;t++){let l=e[t-1],a=e[t],{type:p,values:i}=a;if(!n||"A"!==p&&"a"!==p||(i=[i[0],i[1],i[2],`${i[3]}${i[4]}${i[5]}`,i[6]]),p=l.type===a.type&&"m"!==a.type.toLowerCase()&&n||"M"===l.type&&"L"===a.type&&n?" ":a.type,n){let e="",t=!1;for(let l=0,a=i.length;l<a;l++){let a=i[l],n=a.toString(),s=n.includes(".")&&Math.abs(a)<1;s&&t&&(n=n.replace(/^0\./,".")),!(l>0)||t&&s||(e+=" "),e+=n,t=s}s+=`${p}${u}${e}${r}`}else s+=`${p}${u}${i.join(" ")}${r}`}return n&&(s=s.replace(/ 0\./g," .").replace(/ -/g,"-").replace(/-0\./g,"-.").replace(/Z/g,"z")),s}function B(e,t,l=!1,a=1){let n=[e,t],s=function(e,t){let l=M(e.p0,e.cp1,t.cp2,t.p,!1),a=M(l,t.p,t.p0,t.cp1,!1),n=b(l,t.p),s=b(a,t.p),r=1-s/n,u=b(e.cp2,e.p),p=b(e.cp2,t.cp1);return r=Math.min(u)/p,r}(e,t),r=F(e.p0,e.p),u=F(t.p0,t.p),p=.05*Math.min(r,u)*a,i=function(e,t,l=0,a=0){let{p0:n,cp1:s}=e,{p:r,cp2:u}=t,p={x:(s.x-(1-l)*n.x)/l,y:(s.y-(1-l)*n.y)/l},i={x:(u.x-a*r.x)/(1-a),y:(u.y-a*r.y)/(1-a)},y={p0:n,cp1:p,cp2:i,p:r};return y}(e,t,s,s),y=w([i.p0,i.cp1,i.cp2,i.p],s),h=F(e.p,y),o=0,c=0,x=!1,f=h;if(h<p){let l=.5*(1+s);if(o=F(w([t.p0,t.cp1,t.cp2,t.p],.5),w([i.p0,i.cp1,i.cp2,i.p],l)),f+=o,o<p){let t=.5*s;c=F(w([e.p0,e.cp1,e.cp2,e.p],.5),w([i.p0,i.cp1,i.cp2,i.p],t)),o+c<p&&(x=!0),f+=c}}if(l&&!x){let l=function(e,t,l=0,a=1){const n=(e,t,l,a,n)=>{let s=1-n;return{x:3*s*s*(t.x-e.x)+6*s*n*(l.x-t.x)+3*n*n*(a.x-l.x),y:3*s*s*(t.y-e.y)+6*s*n*(l.y-t.y)+3*n*n*(a.y-l.y)}};let s=[e,t],r=C(e.p0,e.p)>C(t.p0,t.p),u=JSON.parse(JSON.stringify(e)),p=JSON.parse(JSON.stringify(t)),i=M(u.p0,u.cp1,p.p,p.cp2,!1);if(!i)return s;if(r){let l={p0:{x:e.p.x,y:e.p.y},cp1:{x:e.cp2.x,y:e.cp2.y},cp2:{x:e.cp1.x,y:e.cp1.y},p:{x:e.p0.x,y:e.p0.y}};e={p0:{x:t.p.x,y:t.p.y},cp1:{x:t.cp2.x,y:t.cp2.y},cp2:{x:t.cp1.x,y:t.cp1.y},p:{x:t.p0.x,y:t.p0.y}},t=l}let y=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),h=(e,t)=>({x:e.x*t,y:e.y*t}),o=(e,t)=>e.x*t.x+e.y*t.y,c=t.p0,x=n(t.p0,t.cp1,t.cp2,t.p,0),f=o(y(e.p0,c),x)/o(x,x),g=w([t.p0,t.cp1,t.cp2,t.p],f),v=n(t.p0,t.cp1,t.cp2,t.p,f);f-=o(y(g,e.p0),v)/o(v,v);let d=w([t.p0,t.cp1,t.cp2,t.p],f),m=t.p,b=n(t.p0,t.cp1,t.cp2,t.p,f),L=n(t.p0,t.cp1,t.cp2,t.p,1),P=1-f,S=(k=d,I=h(b,P/3),{x:k.x+I.x,y:k.y+I.y});var k,I;let z=y(m,h(L,P/3)),E={p0:d,cp1:S,cp2:z,p:m};r&&(E={p0:m,cp1:z,cp2:S,p:d});let Q=.5*(1-f),T=w([E.p0,E.cp1,E.cp2,E.p],Q,!1,!0),$=T.cpts[2],q=M(T,$,E.p0,i,!1),D=M(T,$,E.p,i,!1),N=A(E.p0,q,1.333),B=A(E.p,D,1.333);if(M(u.p0,N,p.p,B,!0))return s;E.cp1=N,E.cp2=B;let Z=F(u.p0,E.p0)+F(p.p,E.p);if(E.p0=u.p0,E.p=p.p,E.extreme=p.extreme,E.corner=p.corner,E.dimA=p.dimA,E.directionChange=p.directionChange,E.values=[E.cp1.x,E.cp1.y,E.cp2.x,E.cp2.y,E.p.x,E.p.y],Z<l){let e=O([{type:"M",values:[u.p0.x,u.p0.y]},{type:"C",values:[u.cp1.x,u.cp1.y,u.cp2.x,u.cp2.y,u.p.x,u.p.y]},{type:"C",values:[p.cp1.x,p.cp1.y,p.cp2.x,p.cp2.y,p.p.x,p.p.y]}]),t=[{type:"M",values:[E.p0.x,E.p0.y]},{type:"C",values:[E.cp1.x,E.cp1.y,E.cp2.x,E.cp2.y,E.p.x,E.p.y]}],l=O(t),n=Math.abs(l/e-1);E.error=10*n*a,j(t),n<.01&&(s=[E])}return s}(e,t,p,a);1===l.length&&(x=!0,i=l[0],f=i.error)}return x&&(i.p0=e.p0,i.p=t.p,i.dimA=F(i.p0,i.p),i.type="C",i.extreme=t.extreme,i.directionChange=t.directionChange,i.corner=t.corner,i.values=[i.cp1.x,i.cp1.y,i.cp2.x,i.cp2.y,i.p.x,i.p.y],i.error=f/p,n=[i]),n}function Z(e=[]){let t,l=[],a=function(e){let t=[],l={x:e[0].values[0],y:e[0].values[1]};return e.forEach(e=>{let{type:a,values:n}=e;if(n.length){let e=n.length>1?{x:n[n.length-2],y:n[n.length-1]}:"V"===a?{x:l.x,y:n[0]}:{x:n[0],y:l.y};t.push(e),l=e}}),t}(e),n=$(a),{left:s,right:r,top:u,bottom:p,width:i,height:y}=n,h=e[0].values[0],o=e[0].values[1],c={x:e[0].values[0],y:e[0].values[1]},x={x:e[0].values[0],y:e[0].values[1]};e[0].idx=0,e[0].p0=c,e[0].p=c,e[0].lineto=!1,e[0].corner=!1,e[0].extreme=!1,e[0].directionChange=!1,e[0].closePath=!1,e[0].dimA=0;let f=[e[0]],g=0,v=e.length;for(let l=2;v&&l<=v;l++){let a=e[l-1],{type:n,values:i}=a,y=i.slice(-2),v=[x],d=!1;a.idx=l-1,a.lineto=!1,a.corner=!1,a.extreme=!1,a.directionChange=!1,a.closePath=!1,a.dimA=0;let M,b,A,w,L,S,I,z=.05;t=y.length?{x:y[0],y:y[1]}:c,"M"===n?(c=t,x=t):"z"===n.toLowerCase()&&(t=c),a.p0=x,a.p=t;let E=F(x,t);if(a.dimA=E,"L"===n&&(a.lineto=!0),"Z"===n&&(a.closePath=!0,c.x!==h&&c.y!==o&&(a.lineto=!0)),"Q"!==n&&"C"!==n||(M={x:i[0],y:i[1]},b="C"===n?{x:i[2],y:i[3]}:null,a.cp1=M,b&&(a.cp2=b)),i.length>2){"Q"!==n&&"C"!==n||v.push(M),"C"===n&&v.push(b),v.push(t),d=k(v).flat,a.flat=d,d&&(a.extreme=!1)}d||"L"===n||t.x!==s&&t.y!==u&&t.x!==r&&t.y!==p||(a.extreme=!0);let Q=e[l]?e[l]:null,T=Q?Q.values.slice(-2):null;S=Q?Q.type:null,!Q||"Q"!==Q.type&&"C"!==Q.type||(L=Q?{x:T[0],y:T[1]}:null,A={x:Q.values[0],y:Q.values[1]},w="C"===Q.type?{x:Q.values[2],y:Q.values[3]}:null),I=N(v);let $=g<0&&I>0||g>0&&I<0;if(g=I,$&&(a.directionChange=!0),("Q"===n||"C"===n)&&("Q"===n&&"Q"===S||"C"===n&&"C"===S)){let e=v.slice(1),l=k("C"===n?[t,A,w,L]:[t,A,L],((L?Math.abs(L.x-x.x):0)+(L?Math.abs(L.y-x.y):0))/2*.1).flat;if((!d||!l)&&(!!a.extreme||P(0,e,z)))a.extreme=!0;else{let e=b?[b,t]:[M,t],l=[t,A],n=m(...e,!0),s=m(...l,!0),r=180*Math.abs(n-s)/Math.PI,u=C(...e),p=C(...l);r>10&&u&&p&&(a.corner=!0)}}f.push(a),x=t}return l={pathData:f,bb:n,dimA:(i+y)/2},l}function R(e,t=-1){let l=!("auto"!=t||!e[0].hasOwnProperty("decimals"));for(let a=0,n=e.length;a<n;a++){let n=e[a];(t>-1||l)&&(t=l?n.decimals:t,e[a].values=n.values.map(e=>e?+e.toFixed(t):e))}return e}function H(e={},t={},l={},a={}){let n=A(e,t,1.5),s=A(a,l,1.5),r=.01*F(e,a),u=F(n,s),p=null,i={type:"C",values:[t.x,t.y,l.x,l.y,a.x,a.y]};return u<r&&(p=M(e,t,a,l,!1),p&&(i.type="Q",i.values=[p.x,p.y,a.x,a.y],i.p0=e,i.cp1=p,i.p=a)),i}function U(e,{toShorthands:t=!0,toRelative:l=!0,decimals:a=3}={}){return t&&(e=function(e,t=-1,l=!0){let a;if(l){let t=e.map(e=>e.type).join("");a=/[astvqmhlc]/g.test(t)}e=l&&a?W(e,t):e;let n={type:"M",values:e[0].values};e[0].decimals&&(n.decimals=e[0].decimals);let s,r=[n],u={x:e[0].values[0],y:e[0].values[1]},p=.01;for(let l=1,a=e.length;l<a;l++){let a=e[l],{type:i,values:y}=a,h=y.slice(-2),o=e[l-1],c=o.type;s={x:h[0],y:h[1]};let x,f,g,v,d={x:y[0],y:y[1]},m=Math.abs(s.x-u.x),M=Math.abs(s.y-u.y),b=(m+M)/2*p;switch(i){case"L":n=0===M||M<b&&m>b?{type:"H",values:[y[0]]}:0===m||M>b&&m<b?{type:"V",values:[y[1]]}:a;break;case"Q":if("Q"!==c){u={x:h[0],y:h[1]},r.push(a);continue}let e={x:o.values[0],y:o.values[1]};v={x:2*u.x-e.x,y:2*u.y-e.y},x=Math.abs(d.x-v.x),f=Math.abs(d.y-v.y),g=(x+f)/2,n=g<b?{type:"T",values:[s.x,s.y]}:a;break;case"C":let t={x:y[2],y:y[3]};if("C"!==c){r.push(a),u={x:h[0],y:h[1]};continue}let l={x:o.values[2],y:o.values[3]};v={x:2*u.x-l.x,y:2*u.y-l.y},x=Math.abs(d.x-v.x),f=Math.abs(d.y-v.y),g=(x+f)/2,n=g<b?{type:"S",values:[t.x,t.y,s.x,s.y]}:a;break;default:n={type:i,values:y}}(a.decimals||0===a.decimals)&&(n.decimals=a.decimals),t>-1&&(n.values=n.values.map(e=>+e.toFixed(t))),u={x:h[0],y:h[1]},r.push(n)}return r}(e)),e=R(e,a),l&&(e=function(e,t=-1){return V(e,!0,t)}(e)),a>-1&&(e=R(e,a)),e}function J(e,t){Array.isArray(e)&&(e={x:e[0],y:e[1]});let l={x:e.x+2/3*(t[0]-e.x),y:e.y+2/3*(t[1]-e.y)},a={x:t[2]+2/3*(t[0]-t[2]),y:t[3]+2/3*(t[1]-t[3])};return{type:"C",values:[l.x,l.y,a.x,a.y,t[2],t[3]]}}function V(e,t=!1,l=-1){l>=0&&(e[0].values=e[0].values.map(e=>+e.toFixed(l)));let a=e[0].values,n=a[0],s=a[1],r=n,u=s;for(let a=1,p=e.length;a<p;a++){let p=e[a],{type:i,values:y}=p,h=t?i.toLowerCase():i.toUpperCase();if(i!==h)switch(i=h,p.type=i,i){case"a":case"A":y[5]=t?y[5]-n:y[5]+n,y[6]=t?y[6]-s:y[6]+s;break;case"v":case"V":y[0]=t?y[0]-s:y[0]+s;break;case"h":case"H":y[0]=t?y[0]-n:y[0]+n;break;case"m":case"M":t?(y[0]-=n,y[1]-=s):(y[0]+=n,y[1]+=s),r=t?y[0]+n:y[0],u=t?y[1]+s:y[1];break;default:if(y.length)for(let e=0;e<y.length;e++)y[e]=t?y[e]-(e%2?s:n):y[e]+(e%2?s:n)}let o=y.length;switch(i){case"z":case"Z":n=r,s=u;break;case"h":case"H":n=t?n+y[0]:y[0];break;case"v":case"V":s=t?s+y[0]:y[0];break;case"m":case"M":r=y[o-2]+(t?n:0),u=y[o-1]+(t?s:0);default:n=y[o-2]+(t?n:0),s=y[o-1]+(t?s:0)}l>=0&&(p.values=p.values.map(e=>+e.toFixed(l)))}return e}function W(e,t=-1){return V(e,!1,t)}function X(e,t,l=1){const a=2*Math.PI;let[n,s,r,u,p,i,y]=t;if(0===n||0===s)return[];let h=r?r*a/360:0,o=h?Math.sin(h):0,c=h?Math.cos(h):1,x=c*(e.x-i)/2+o*(e.y-y)/2,f=-o*(e.x-i)/2+c*(e.y-y)/2;if(0===x&&0===f)return[];n=Math.abs(n),s=Math.abs(s);let g=x*x/(n*n)+f*f/(s*s);if(g>1){let e=Math.sqrt(g);n*=e,s*=e}let v=n*n,d=n===s?v:s*s,m=x*x,M=f*f,b=v*d-v*M-d*m;b<=0?b=0:(b/=v*M+d*m,b=Math.sqrt(b)*(u===p?-1:1));let C=b?b*n/s*f:0,A=b?b*-s/n*x:0,w=c*C-o*A+(e.x+i)/2,L=o*C+c*A+(e.y+y)/2,P=(x-C)/n,S=(f-A)/s,k=(-x-C)/n,I=(-f-A)/s;const F=(e,t,l,a)=>{let n=+(e*l+t*a).toFixed(9);return 1===n||-1===n?1===n?0:Math.PI:(n=n>1?1:n<-1?-1:n,(e*a-t*l<0?-1:1)*Math.acos(n))};let z=F(1,0,P,S),E=F(P,S,k,I);0===p&&E>0?E-=2*Math.PI:1===p&&E<0&&(E+=2*Math.PI);let Q=(+(Math.abs(E)/(a/4)).toFixed(0)||1)*l;E/=Q;let T=[];const $=1.5707963267948966,q=.551785;let D=E===$?q:E===-$?-q:4/3*Math.tan(E/4),O=E?Math.cos(E):1,N=E?Math.sin(E):0;const j=(e,t,l,a,n)=>{let s=e!=t?Math.cos(e):a,r=e!=t?Math.sin(e):n,u=Math.cos(e+t),p=Math.sin(e+t);return[{x:s-r*l,y:r+s*l},{x:u+p*l,y:p-u*l},{x:u,y:p}]};for(let e=0;e<Q;e++){let e={type:"C",values:[]};j(z,E,D,O,N).forEach(t=>{let l=t.x*n,a=t.y*s;e.values.push(c*l-o*a+w,o*l+c*a+L)}),T.push(e),z+=E}return T}function Y(e,t,l,a,n=7.5){let s={type:"C",values:[t.x,t.y,l.x,l.y,a.x,a.y]},r=0,u=!1,p=m(e,t,!0),i=m(a,l,!0),y=180*Math.abs(p-i)/Math.PI;if(Math.abs(y%180-90)<3){let p=M(e,t,a,l,!1);if(p){let i=b(e,p),y=b(a,p),h=+Math.max(i,y).toFixed(8),o=+Math.min(i,y).toFixed(8),c=o,x=h,f=N([e,t,l,a])<0?0:1,g=Math.abs(a.x-e.x)>Math.abs(a.y-e.y);100/c*Math.abs(c-x)<5&&(c=h,x=c),g&&(c=h,x=o);let v=O([{type:"M",values:[e.x,e.y]},{type:"C",values:[t.x,t.y,l.x,l.y,a.x,a.y]}]),d={type:"A",values:[c,x,0,0,f,a.x,a.y]};r=Math.PI*(c*x)/4,r-=Math.abs(N([e,a,p])),function(e,t){let l=Math.abs(e-t);return Math.abs(100-100/e*(e+l))}(v,r)<n&&(u=!0,s=d)}}return{com:s,isArc:u,area:r}}function G(e){let t,l=[[]],a=0,n=[[]],s={x:e[0].values[0],y:e[0].values[1]};for(let r=0,u=e.length;r<u;r++){let u=e[r],{type:p,values:i}=u;if("A"===p){let p=e[r-1].values.slice(-2);s={x:p[0],y:p[1]};let[y,h,o,c,x,f,g]=i,v=100/y*Math.abs(y-h)<5;t={x:i[5],y:i[6]},u.p0=s,u.p=t,u.circular=v;let d=e[r+1];if(!l[a].length&&d&&"A"===d.type&&(l[a].push(u),n[a].push(r)),d&&"A"===d.type){let[e,u,p,i,o,c,x]=d.values,f=y!=e?100/y*Math.abs(y-e):0,g=h!=u?100/h*Math.abs(h-u):0;t={x:d.values[5],y:d.values[6]},d.p0=s,d.p=t,f<5&&g<5?(l[a].push(d),n[a].push(r+1)):(l.push([]),n.push([]),a++)}else l.push([]),n.push([]),a++}}if(!n.length)return e;l=l.filter(e=>e.length),n=n.filter(e=>e.length);for(let t=l.length-1;t>=0;t--){const a=l[t],s=n[t][0],r=a.length;let u=0,p=0;a.forEach(({values:e})=>{const[t,l]=e;u+=t,p+=l}),u/=r,p/=r;let i=100/u*Math.abs(u-p)<5;i&&(u=(u+p)/2,p=u);let y=e[s-1].values.slice(-2);if(y[0],y[1],4===r){let[t,l,n,y,h,o,c]=a[1].values,[,,,,,x,f]=a[3].values;i&&(u=1,p=1);let g={type:"A",values:[u,p,n,y,h,o,c]},v={type:"A",values:[u,p,n,y,h,x,f]};e.splice(s,r,g,v)}else if(3===r){let[t,l,n,i,y,h,o]=a[0].values,[c,x,,,,f,g]=a[2].values;i=1;let v={type:"A",values:[u,p,n,i,y,f,g]};e.splice(s,r,v)}else if(2===r){let[t,l,n,y,h,o,c]=a[0].values,[x,f,,,,g,v]=a[1].values;i&&(u=1,p=1,n=0);let{p0:d,p:m}=a[0],[M,b]=[a[1].p0,a[1].p];if(d.x!==b.x||d.y!==b.y){let t={type:"A",values:[u,p,n,y,h,g,v]};e.splice(s,r,t)}}}return e}function K(e=[],{toAbsolute:t=!0,toLonghands:l=!0,quadraticToCubic:a=!1,arcToCubic:n=!1,arcAccuracy:s=2}={},{hasRelatives:r=!0,hasShorthands:u=!0,hasQuadratics:p=!0,hasArcs:i=!0,testTypes:y=!1}={}){if(y){let t=Array.from(new Set(e.map(e=>e.type))).join("");r=/[lcqamts]/gi.test(t),p=/[qt]/gi.test(t),i=/[a]/gi.test(t),u=/[vhst]/gi.test(t),isPoly=/[mlz]/gi.test(t)}return(p&&a||i&&n)&&(l=!0,t=!0),r&&t&&(e=V(e,!1)),u&&l&&(e=function(e,t=-1,l=!0){let a=!1;if(l){let t=e.map(e=>e.type).join(""),l=/[hstv]/gi.test(t);if(a=/[astvqmhlc]/g.test(t),!l)return e}let n=[],s={type:"M",values:(e=l&&a?W(e,t):e)[0].values};n.push(s);for(let l=1,a=e.length;l<a;l++){let a,r,u,p,i,y,h,o,c=e[l],{type:x,values:f}=c,g=f.length,v=s.values,d=v.length,[m,M]=[f[g-2],f[g-1]],[b,C]=[v[d-2],v[d-1]];switch(x){case"H":s={type:"L",values:[f[0],C]};break;case"V":s={type:"L",values:[b,f[0]]};break;case"T":[a,r]=[v[0],v[1]],[b,C]=[v[d-2],v[d-1]],u=b+(b-a),p=C+(C-r),s={type:"Q",values:[u,p,m,M]};break;case"S":[a,r]=[v[0],v[1]],[b,C]=[v[d-2],v[d-1]],[h,o]=d>2&&"A"!==s.type?[v[2],v[3]]:[b,C],u=2*b-h,p=2*C-o,i=f[0],y=f[1],s={type:"C",values:[u,p,i,y,m,M]};break;default:s={type:x,values:f}}t>-1&&(s.values=s.values.map(e=>+e.toFixed(t))),n.push(s)}return n}(e,-1,!1)),i&&n&&(e=function(e,{arcAccuracy:t=1}={}){let l=[e[0]];for(let a=1,n=e.length;a<n;a++){let n=e[a],s=e[a-1].values,r=s.length,u={x:s[r-2],y:s[r-1]};"A"===n.type?X(u,n.values,t).forEach(e=>{l.push(e)}):l.push(n)}return l}(e,s)),p&&a&&(e=function(e){let t=[e[0]];for(let l=1,a=e.length;l<a;l++){let a=e[l],n=e[l-1].values,s=n.length,r={x:n[s-2],y:n[s-1]};"Q"===a.type?t.push(J(r,a.values)):t.push(a)}return t}(e)),e}function _(e,{toAbsolute:t=!0,toLonghands:l=!0,quadraticToCubic:a=!1,arcToCubic:n=!1,arcAccuracy:s=4}={}){let r=function(e,t=!0){if(e=e.trim(),""===e)return{pathData:[],hasRelatives:!1,hasShorthands:!1,hasQuadratics:!1,hasArcs:!1};const l=new Set([5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279]),a=e=>32===e||44===e||10===e||13===e||8232===e||8233===e||9===e||11===e||12===e||160===e||e>=5760&&l.has(e);let n,s=0,r=e.length,u="",p=[],i=-1,y="",h=!1,o=0,c=0,x=0,f=!1,g=new Set([]),v=[];const d=()=>{f&&("M"===u?u="L":"m"===u&&(u="l"),p.push({type:u,values:[]}),i++,c=0,f=!1)},m=(e=!1)=>{(e?o>0:""!==y)&&(t&&-1===i&&(n="Pathdata must start with M command",v.push(n),u="M",p.push({type:u,values:[]}),x=2,c=0,i++),"A"===u||"a"===u?(y=M(),p[i].values.push(...y)):(t&&y[1]&&"."!==y[1]&&"0"===y[0]&&(n=`${i}. command: Leading zeros not valid: ${y}`,v.push(n)),p[i].values.push(+y)),c++,y="",o=0,f=c>=x)},M=()=>{let e=y.length,t=!1;return 3===c&&2===e||4===c&&e>1?(y=[+y[0],+y[1]],t=!0,c++):3===c&&e>=3&&(y=[+y[0],+y[1],+y.substring(2)],t=!0,c+=2),t?y:[+y]},b=()=>{if(i>0){let e=p[i].values.length;if(e&&e<x||e&&e>x||("z"===u||"Z"===u)&&e>0){n=`${i}. command of type "${u}": ${x-e} values too few - ${x} expected`,v[v.length-1]!==n&&v.push(n)}}};let C=!1,A=!1,w=!1;for(;s<r;){let l=e.charCodeAt(s),r=l>47&&l<58;if(r||(C=101===l||69===l,A=45===l||43===l,w=46===l),r||A||w||C){if(h||45!==l&&46!==l)d();else{let e=46===l;m(e),d(),e&&o++}y+=e[s],h=C,s++}else if((l<48||l>5759)&&a(l))m(),s++;else{if(l>64){if(!ee.has(l)){n=`${i}. command "${e[s]}" is not a valid type`,v.push(n),s++;continue}""!==y&&(p[i].values.push(+y),c++,y=""),t&&b(),u=e[s],x=te[l];let a="M"===u||"m"===u,r=i>0&&("z"===p[i].type||"Z"===p[i].type);g.add(u),r&&!a&&(p.push({type:"m",values:[0,0]}),i++),p.push({type:u,values:[]}),i++,o=0,c=0,f=!1,s++;continue}r||(n=`${i}. ${e[s]} is not a valid separarator or token`,v.push(n),y=""),s++}}m(),t&&b();if(t&&v.length){if(n="Invalid path data:\n"+v.join("\n"),"log"!==t)throw new Error(n);console.log(n)}p[0].type="M";let L=Array.from(g).join(""),P=/[lcqamts]/g.test(L),S=/[vhst]/gi.test(L),k=/[a]/gi.test(L),I=/[qt]/gi.test(L);return{pathData:p,hasRelatives:P,hasShorthands:S,hasQuadratics:I,hasArcs:k}}(e),{hasRelatives:u,hasShorthands:p,hasQuadratics:i,hasArcs:y}=r,h=r.pathData;return h=K(h,{toAbsolute:t,toLonghands:l,quadraticToCubic:a,arcToCubic:n,arcAccuracy:s},{hasRelatives:u,hasShorthands:p,hasQuadratics:i,hasArcs:y}),h}const ee=new Set([77,109,65,97,67,99,76,108,81,113,83,115,84,116,72,104,86,118,90,122]),te=new Uint8Array(128);function le(e,t=1,l=!0){let a=[e[0]],n={x:e[0].values[0],y:e[0].values[1]},s=n,r=n;e[e.length-1].type.toLowerCase();for(let u=1,p=e.length;u<p;u++){let i=e[u-1],y=e[u],h=e[u+1]||e[p-1],o="z"===h.type.toLowerCase()?n:{x:h.values[h.values.length-2],y:h.values[h.values.length-1]},{type:c,values:x}=y,f=x.slice(-2);r="Z"!==c?{x:f[0],y:f[1]}:n;let g=N([s,r,o],!0);C(s,r),C(r,o);let v=g<C(s,o)/200*t,d=!1;if(l||"C"!==c||(v=!1),l&&("C"===c||"Q"===c)){d=I(s,"C"===c?[{x:x[0],y:x[1]},{x:x[2],y:x[3]}]:"Q"===c?[{x:x[0],y:x[1]}]:[],r),d&&u<p-1&&"C"!==i.type&&(c="L",y.type="L",y.values=f)}s=r,v&&u<p-1&&("L"===c||l&&d)||("M"===c?(n=r,s=n):"Z"===c&&(s=n),a.push(y))}return a}function ae(e){let t=[];return e.forEach((e,l)=>{let{type:a,values:n}=e;if("l"===a||"v"===a||"h"===a){("l"===a?"00"!==n.join(""):0!==n[0])&&t.push(e)}else t.push(e)}),t}function ne(e){let t={x:e[0].values[0],y:e[0].values[1]},l=t,a=[e[0]];for(let n=1,s=e.length;n<s;n++){let s=e[n],{type:r,values:u}=s,p=u.slice(-2);l={x:p[0],y:p[1]},"L"===r&&l.x===t.x&&l.y===t.y||(a.push(s),t=l)}return a}function se(e){let t=e.length;if(!("z"===e[t-1].type.toLowerCase()))return e;let l=0,a=[];for(let l=0;l<t;l++){let t=e[l],{type:n,values:s}=t,r=s.length;if(r){let e={type:n,x:s[r-2],y:s[r-1],index:0};e.index=l,a.push(e)}}return a=a.sort((e,t)=>+e.y.toFixed(3)-+t.y.toFixed(3)),l=a[0].index,l?ue(e,l):e}function re(e,t=!0,l=!0){let a=[],n=e.length,s={x:+e[0].values[0].toFixed(8),y:+e[0].values[1].toFixed(8)},r="z"===e[n-1].type.toLowerCase(),u=e.filter(e=>"L"===e.type),p=e[n-2],i=p.type,y=p.values.slice(-2).map(e=>+e.toFixed(8)),h=y[0]===s.x&&y[1]===s.y,o="L"!==e[1].type&&(!h||"L"===i);if(o=!1,!r)return e;let c=0;{let t=[];for(let l=0,a=e.length;l<a;l++){let a=e[l],{type:n,values:s}=a;if(s.length){let a=s.slice(-2),r=e[l-1]&&"L"===e[l-1].type,u=e[l+1]&&"L"===e[l+1].type,p=e[l-1]?e[l-1].type.toUpperCase():null,i=e[l+1]?e[l+1].type.toUpperCase():null,y={type:n,x:a[0],y:a[1],dist:0,index:0,prevL:r,nextL:u,prevCom:p,nextCom:i};y.index=l,t.push(y)}}if(u.length){let e=t.filter(e=>"L"!==e.type&&"M"!==e.type&&e.prevCom&&"L"===e.prevCom||"M"===e.prevCom&&"L"===i).sort((e,t)=>e.y-t.y||e.x-t.x)[0];c=e?e.index-1:0}else t=t.sort((e,t)=>+e.y.toFixed(1)-+t.y.toFixed(1)||e.x-t.x),c=t[0].index;e=c?ue(e,c):e}return s={x:+e[0].values[0].toFixed(8),y:+e[0].values[1].toFixed(7)},n=e.length,p=e[n-2],i=p.type,y=p.values.slice(-2).map(e=>+e.toFixed(8)),h="L"===i&&y[0]===s.x&&y[1]===s.y,t&&h&&e.splice(n-2,1),a.push(...e),a}function ue(e,t){let l=0,a="z"===e[e.length-1].type.toLowerCase();if(!a||t<1||e.length<3)return e;let n=a?1:0;!function(e){let t=e.length,l="z"===e[t-1].type.toLowerCase(),a=e[0],[n,s]=[a.values[0],a.values[1]].map(e=>+e.toFixed(8)),r=l?e[t-2]:e[t-1],u=r.values.length,[p,i]=[r.values[u-2],r.values[u-1]].map(e=>+e.toFixed(8));!l||n==p&&s==i||(e.pop(),e.push({type:"L",values:[n,s]},{type:"Z",values:[]}))}(e),l=t+1<e.length-1?t+1:e.length-1-n;let s,r,u=e.slice(l),p=e.slice(0,l);return p.shift(),s=p[p.length-1].values||[],r=[s[s.length-2],s[s.length-1]],n&&(u.pop(),p.push({type:"Z",values:[]})),e=[{type:"M",values:r},...u,...p]}function pe(e,{arcToCubic:t=!1,quadraticToCubic:l=!1,toClockwise:a=!1,returnD:n=!1}={}){const s=(e,t)=>{let l=[],a=[];if("A"!==e){for(let e=0;e<t.length;e+=2)l.push([t[e],t[e+1]]);a=l.pop(),l.reverse()}else{let e=0==t[4]?1:0;l=[t[0],t[1],t[2],t[3],e],a=[t[5],t[6]]}return{controlPoints:l,endPoints:a}};let r=[],u="z"===e[e.length-1].type.toLowerCase();u&&(e=(e=>{let t="z"===e[e.length-1].type.toLowerCase(),l=e[0],[a,n]=[l.values[0],l.values[1]],s=t?e[e.length-2]:e[e.length-1],[r,u]=[s.values[s.values.length-2],s.values[s.values.length-1]];return!t||a==r&&n==u||(e.pop(),e.push({type:"L",values:[a,n]},{type:"Z",values:[]})),e})(e),e.pop());let p=e[e.length-1].values,i=p.length,y=u?e[0]:{type:"M",values:[p[i-2],p[i-1]]};r.push(y),e.reverse();for(let t=1;t<e.length;t++){let l=e[t],a=l.type,n=l.values,u=e[t-1],p=u.type,i=[];i=[s(p,u.values).controlPoints,s(a,n).endPoints].flat(),r.push({type:p,values:i.flat()})}return u&&r.push({type:"z",values:[]}),r}function ie(e){let t=(new XMLSerializer).serializeToString(e);return t=t.replace(/\t/g,"").replace(/[\n\r|]/g,"\n").replace(/\n\s*\n/g,"\n").replace(/ +/g," "),t}function ye(e="",{getObject:t=!1,toAbsolute:l=!0,toRelative:a=!0,toShorthands:n=!0,quadraticToCubic:s=!0,arcToCubic:r=!1,cubicToArc:u=!1,simplifyBezier:p=!0,optimizeOrder:i=!0,removeColinear:y=!0,flatBezierToLinetos:h=!0,revertToQuadratics:o=!0,keepExtremes:c=!0,keepCorners:x=!0,extrapolateDominant:f=!0,keepInflections:g=!1,addExtremes:v=!1,decimals:d=3,autoAccuracy:m=!0,minifyD:M=0,tolerance:b=1,reverse:C=!1,mergePaths:A=!1,removeHidden:w=!0,removeUnused:L=!0}={}){b=Math.max(.1,b);let P=function(e){let t="string";if(Array.isArray(e))return"array";if("string"==typeof e){let l=(e=e.trim()).includes("<svg")&&e.includes("</svg"),a=e.startsWith("M")||e.startsWith("m"),n=!isNaN(e.substring(0,1))&&!isNaN(e.substring(e.length-1,e.length));if(l)t="svgMarkup";else if(a)t="pathDataString";else if(n)t="polyString";else{let l=/^(file:|https?:\/\/|\/|\.\/|\.\.\/)/.test(e),a=e.startsWith("data:image");t=l||a?"url":"string"}return t}return t=typeof e,(e.constructor.name||t).toLowerCase()}(e),S="",k=0,I=0,E=0,Q={},$="",q="svgMarkup"===P?1:0,D=[];if(k=new Blob([e]).size,q){S=function(e,{returnDom:t=!1,removeHidden:l=!0,removeUnused:a=!0}={}){e=(e=e.replace(/<\?xml[\s\S]*?\?>/gi,"").replace(/<!DOCTYPE[\s\S]*?>/gi,"").replace(/<!--[\s\S]*?-->/g,"").trim()).replaceAll("xlink:href=","href=");let n=(new DOMParser).parseFromString(e,"text/html").querySelector("svg");!function(e,t=["viewBox","xmlns","width","height","id","class"]){[...e.attributes].map(e=>e.name).forEach(l=>{t.includes(l)||e.removeAttribute(l)})}(n,["viewBox","xmlns","width","height","id","class"]);let s=["metadata","script"];if(n.querySelectorAll("*").forEach(e=>{let t=e.nodeName,a=e.getAttribute("style")||"",n=!!a&&a.trim().includes("display:none"),r=e.getAttribute("display")&&"none"===e.getAttribute("display")||n;t.includes(":")||s.includes(t)||l&&r?e.remove():function(e){[...e.attributes].map(e=>e.name).forEach(t=>{t.includes(":")&&e.removeAttribute(t)})}(e)}),t)return n;let r=ie(n);return console.log(r),r}(e,{returnDom:!0,removeHidden:w,removeUnused:L}),S.querySelectorAll("path").forEach(e=>{D.push({d:e.getAttribute("d"),el:e})})}else"pathDataString"===P?$=e:"polyString"===P&&($="M"+e),D.push({d:$,el:null});let O={toRelative:a,toShorthands:n,decimals:d},N=[];if(D.forEach(e=>{let{d:t,el:a}=e,n=_(t,{quadraticToCubic:s,toAbsolute:l,arcToCubic:r}),w=JSON.parse(JSON.stringify(n)),L=n.length,P=z(w),S=[];for(let e=0,t=P.length;e<t;e++){let t=P[e];C&&(t=pe(t)),y&&(t=ne(t)),v&&(t=T(t,0,1)),i&&(t=se(t)),y&&(t=le(t,b,h));let l=Z(t),{pathData:a,bb:n,dimA:s}=l;if(a=p?he(a,{simplifyBezier:p,keepInflections:g,keepExtremes:c,keepCorners:x,extrapolateDominant:f,revertToQuadratics:o,tolerance:b,reverse:C}):a,u){let e=3;a.forEach((t,l)=>{let{type:n,values:s,p0:r,cp1:u=null,cp2:p=null,p:i=null}=t;if("C"===n){let t=Y(r,u,p,i,e);t.isArc&&(a[l]=t.com)}}),a=G(a)}o&&a.forEach((e,t)=>{let{type:l,values:n,p0:s,cp1:r=null,cp2:u=null,p:p=null}=e;if("C"===l){let l=H(s,r,u,p);"Q"===l.type&&(l.extreme=e.extreme,l.corner=e.corner,l.dimA=e.dimA,a[t]=l)}}),i&&(a=re(a)),S.push(a)}if(w=S.flat(),a&&A)N.push(...w);else{m&&(d=function(e){let t={x:e[0].values[0],y:e[0].values[1]},l=t,a=t;e[0].decimals=0;let n=new Set;for(let s=0,r=e.length;s<r;s++){let r=e[s],{type:u,values:p}=r,i=p.length?p.slice(-2):[t.x,t.y];a={x:i[0],y:i[1]};let y=r.dimA?+r.dimA.toFixed(8):"M"!==u?+F(l,a).toFixed(8):0;y&&n.add(y),"M"===u&&(t=a),l=a}let s=Array.from(n).sort(),r=Math.ceil(s.length/8);s=s.slice(0,r);let u=s.reduce((e,t)=>e+t,0)/r,p=u>50?0:Math.floor(50/u).toString().length;return Math.min(Math.max(0,p),8)}(w)),w=U(w,O),w=ae(w);let t=w.length,l=j(w,M);I=new Blob([l]).size,E=+(100/k*I).toFixed(2),e.d=l,e.report={original:L,new:t,saved:L-t,compression:E,decimals:d},a&&a.setAttribute("d",l)}}),q){if(N.length){let e=U(N,O);e=ae(e);let t=j(e,M);D[0].el.setAttribute("d",t);for(let e=1;e<D.length;e++){let t=D[e].el;t&&t.remove()}!function(e){e.querySelectorAll("g, defs").forEach(e=>{e.children.length||e.remove()})}(S)}S=ie(S),I=new Blob([S]).size,E=+(100/k*I).toFixed(2),k=+(k/1024).toFixed(3),I=+(I/1024).toFixed(3),Q={svgSize:k,svgSizeOpt:I,compression:E}}else({d:$,report:Q}=D[0]);return t?{svg:S,d:$,report:Q,inputType:P,mode:q}:$||S}function he(e,{keepExtremes:t=!0,keepInflections:l=!0,keepCorners:a=!0,extrapolateDominant:n=!0,tolerance:s=1,reverse:r=!1}={}){let u=[e[0]];for(let r=2,p=e.length;p&&r<=p;r++){let i=e[r-1],y=r<p?e[r]:null,h=y?.type||null,o=i?.directionChange||null,c=y?.directionChange||null,{type:x,values:f,p0:g,p:v,cp1:d=null,cp2:m=null,extreme:M=!1,corner:b=!1,dimA:C=0}=i;if("C"===x&&"C"===h)if(l&&c||a&&b||!o&&t&&M)u.push(i);else{let h=B(i,y,n,s),o=0;if(1===h.length){i=h[0];let y=1;o+=i.error;for(let u=r+1;o<s&&u<p;u++){let r=e[u];if("C"!==r.type||l&&r.directionChange||a&&i.corner||t&&i.extreme)break;let p=B(i,r,n,s);1===p.length&&(o+=.5*p[0].error,y++),i=p[0]}u.push(i),r<p&&(r+=y)}else u.push(i)}else u.push(i)}return r&&(u=pe(u)),u}te[77]=2,te[109]=2,te[65]=7,te[97]=7,te[67]=6,te[99]=6,te[76]=2,te[108]=2,te[81]=4,te[113]=4,te[83]=4,te[115]=4,te[84]=2,te[116]=2,te[72]=1,te[104]=1,te[86]=1,te[118]=1,te[90]=0,te[122]=0;const{abs:oe,acos:ce,asin:xe,atan:fe,atan2:ge,ceil:ve,cos:de,exp:me,floor:Me,log:be,hypot:Ce,max:Ae,min:we,pow:Le,random:Pe,round:Se,sin:ke,sqrt:Ie,tan:Fe,PI:ze}=Math;"undefined"!=typeof window&&(window.svgPathSimplify=ye);export{ze as PI,oe as abs,ce as acos,xe as asin,fe as atan,ge as atan2,ve as ceil,de as cos,me as exp,Me as floor,Ce as hypot,be as log,Ae as max,we as min,Le as pow,Pe as random,Se as round,ke as sin,Ie as sqrt,ye as svgPathSimplify,Fe as tan};
