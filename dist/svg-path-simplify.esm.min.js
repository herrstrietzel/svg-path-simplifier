const{abs:e,acos:t,asin:l,atan:a,atan2:n,ceil:s,cos:r,exp:p,floor:u,log:y,max:h,min:i,pow:c,random:o,round:x,sin:f,sqrt:v,tan:g,PI:M}=Math;function d(e,t,l=!1){let a=n(t.y-e.y,t.x-e.x);return l&&a<0&&(a+=2*Math.PI),a}function m(e,t,l,a,n=!0){let s,r,p,u,y,h={};try{if(s=(a.y-l.y)*(t.x-e.x)-(a.x-l.x)*(t.y-e.y),0==s)return!1}catch{console.log("!catch",e,t,"p3:",l,a)}r=e.y-l.y,p=e.x-l.x,u=(a.x-l.x)*r-(a.y-l.y)*p,y=(t.x-e.x)*r-(t.y-e.y)*p,r=u/s,p=y/s,h={x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)};let i=!1;return r>0&&r<1&&p>0&&p<1&&(i=!0),!(n&&!i)&&h}function b(e,t){return v((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function C(e,t){return(t.x-e.x)**2+(t.y-e.y)**2}function A(e,t,l,a=!1){let n={x:(t.x-e.x)*l+e.x,y:(t.y-e.y)*l+e.y};return a&&(n.angle=d(e,t),n.angle<0&&(n.angle+=2*M)),n}function w(e,t=.5,l=!1,a=!1){let n;return n=e.length>2?((e,t,l=!1)=>{let n=4===e.length,s=e[0],r=e[1],p=n?e[2]:e[1],u=e[e.length-1],y={x:0,y:0};if(l||a){let e,l,h,i,c,o=s.x===r.x&&s.y===r.y,x=u.x===p.x&&u.y===p.y;0!==t||o?1!==t||x?(o&&(t+=1e-7),x&&(t-=1e-7),e=A(s,r,t),n?(l=A(r,p,t),h=A(p,u,t),i=A(e,l,t),c=A(l,h,t),y=A(i,c,t),y.angle=d(i,c),a&&(y.cpts=[l,h,i,c])):(l=A(s,r,t),h=A(r,u,t),y=A(l,h,t),y.angle=d(l,h),a&&(y.cpts=[l,h]))):(y.x=u.x,y.y=u.y,y.angle=d(p,u)):(y.x=s.x,y.y=s.y,y.angle=d(s,r))}else{let e=1-t;y=n?{x:e**3*s.x+3*e**2*t*r.x+3*e*t**2*p.x+t**3*u.x,y:e**3*s.y+3*e**2*t*r.y+3*e*t**2*p.y+t**3*u.y}:{x:e*e*s.x+2*e*t*r.x+t**2*u.x,y:e*e*s.y+2*e*t*r.y+t**2*u.y}}return y})(e,t,l):A(e[0],e[1],t,l),l&&n.angle<0&&(n.angle+=2*M),n}function L(e,t,l,n,s,p=0,u=!0,y=!1){if(s=y?s*M/180:s,p=y?p*M/180:p,p=l!==n&&p!==2*M?p:0,u&&l!==n){let e=a(g(s=p?s-p:s)*(l/n));s=r(s)<0?e+M:e}let h=e+l*r(s),i=t+n*f(s),c={x:h,y:i};return p&&(c.x=e+(h-e)*r(p)-(i-t)*f(p),c.y=t+(h-e)*f(p)+(i-t)*r(p)),c}function P(e,t=[],l=.05){let a=3===t.length,n=t[0]||null,s=a?t[1]:null,r=a?t[2]:t[1],p=.5*Math.PI,u=!1,y=!1,h=n?d(r,n,!0):null;if(u=Math.abs(h%p)<l||Math.abs(h%p-p)<l,a){let e=s?d(s,r,!0):0;y=Math.abs(e%p)<=l||Math.abs(e%p-p)<=l}return u||y}function I(e){return 4===e.length?function(e,t,l,a){let[n,s,r,p,u,y,h,i]=[e.x,e.y,t.x,t.y,l.x,l.y,a.x,a.y],c=Math.min(e.y,a.y),o=Math.min(e.x,a.x),x=Math.max(e.x,a.x),f=Math.max(e.y,a.y);if(t.y>=c&&t.y<=f&&l.y>=c&&l.y<=f&&t.x>=o&&t.x<=x&&l.x>=o&&l.x<=x)return[];let v,g,M,d,m,b,C,A,w=[];for(let e=0;e<2;++e)if(0==e?(g=6*n-12*r+6*u,v=-3*n+9*r-9*u+3*h,M=3*r-3*n):(g=6*s-12*p+6*y,v=-3*s+9*p-9*y+3*i,M=3*p-3*s),Math.abs(v)<1e-12){if(Math.abs(g)<1e-12)continue;d=-M/g,0<d&&d<1&&w.push(d)}else C=g*g-4*M*v,C<0?Math.abs(C)<1e-12&&(d=-g/(2*v),0<d&&d<1&&w.push(d)):(A=Math.sqrt(C),m=(-g+A)/(2*v),0<m&&m<1&&w.push(m),b=(-g-A)/(2*v),0<b&&b<1&&w.push(b));let L=w.length;for(;L--;)d=w[L];return w}(e[0],e[1],e[2],e[3]):function(e,t,l){let a,n,s,r=Math.min(e.y,l.y),p=Math.min(e.x,l.x),u=Math.max(e.x,l.x),y=Math.max(e.y,l.y);if(t.y>=r&&t.y<=y&&t.x>=p&&t.x<=u)return[];let[h,i,c,o,x,f]=[e.x,e.y,t.x,t.y,l.x,l.y],v=[];for(let e=0;e<2;++e)a=0==e?h-2*c+x:i-2*o+f,n=0==e?-2*h+2*c:-2*i+2*o,Math.abs(a)>1e-12&&(s=-n/(2*a),s>0&&s<1&&v.push(s));return v}(e[0],e[1],e[2])}function $(e,t=.025){let l=e[0],a=e[e.length-1],n=e.map(e=>e.x),s=e.map(e=>e.y),r=Math.min(...n),p=Math.max(...n),u=Math.min(...s),y=p-r,h=Math.max(...s)-u;if(e.length<3||0===y||0===h)return{area:0,flat:!0,thresh:1e-4,ratio:0};let i=C(l,a),c=C(l,e[0]),o=(c+(e.length>3?C(a,e[1]):c))/2;let x=.5*(y+h)*.5,f=0;for(let t=0,l=e.length;t<l;t++){f+=e[t].x*e[t===e.length-1?0:t+1].y*.5-e[t===e.length-1?0:t+1].x*e[t].y*.5}f=+Math.abs(f).toFixed(9);return{area:f,flat:0===f||f<o/1e3,thresh:x,ratio:f/o,squareDist:i,areaThresh:i/1e3}}function k(e,t){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y))/2}function Q(e){let t=[];try{e.map((e,t)=>"m"===e.type.toLowerCase()?t:-1).filter(e=>-1!==e)}catch{console.log("catch",e)}let l=e.map((e,t)=>"m"===e.type.toLowerCase()?t:-1).filter(e=>-1!==e);return 1===l.length?[e]:(l.forEach((a,n)=>{t.push(e.slice(a,l[n+1]))}),t)}function S(e,t){let l,a,n,s,r,p,u=[],y=[],h=e[0],i=e[1],c=e[e.length-2],o=e[e.length-1];return 4===e.length?(l=w([h,i],t),a=w([i,c],t),n=w([c,o],t),s=w([l,a],t),r=w([a,n],t),p=w([s,r],t),u.push({x:h.x,y:h.y},{x:l.x,y:l.y},{x:s.x,y:s.y},{x:p.x,y:p.y}),y.push({x:p.x,y:p.y},{x:r.x,y:r.y},{x:n.x,y:n.y},{x:o.x,y:o.y})):3===e.length?(a=w([h,i],t),n=w([i,o],t),p=w([a,n],t),u.push({x:h.x,y:h.y},{x:a.x,y:a.y},{x:p.x,y:p.y}),y.push({x:p.x,y:p.y},{x:n.x,y:n.y},{x:o.x,y:o.y})):2===e.length&&(a=w([h,o],t),u.push({x:h.x,y:h.y},{x:a.x,y:a.y}),y.push({x:a.x,y:a.y},{x:o.x,y:o.y})),[u,y]}function T(e,t,l=0,a=1){let n=[],s=6===t.length?"C":"Q",r={x:t[0],y:t[1]},p="C"===s?{x:t[2],y:t[3]}:r,u={x:t[4],y:t[5]},y=Math.max(u.x,e.x),h=Math.min(u.x,e.x),i=Math.max(u.y,e.y),c=Math.min(u.y,e.y),o=0;if(r.x<h||r.x>y||r.y<c||r.y>i||p.x<h||p.x>y||p.y<c||p.y>i){let y=I("C"===s?[e,r,p,u]:[e,r,u]).sort();if(y=y.filter(e=>e>l&&e<a),y.length){let l=function(e,t,l,a=!0){let n=[];if(!l.length)return!1;let s,r,p,u=t.length,y={x:t[u-2],y:t[u-1]};2===t.length?p=[e,y]:4===t.length?(s={x:t[0],y:t[1]},p=[e,s,y]):6===t.length&&(s={x:t[0],y:t[1]},r={x:t[2],y:t[3]},p=[e,s,r,y]);if(l.length)if(1===l.length){let e=S(p,l[0]),t=e[0],a=e[1];n.push(t,a)}else{let e=l[0],t=S(p,e),a=t[0];n.push(a),p=t[1];for(let t=1;t<l.length;t++){e=l[t-1];let a=S(p,(l[t]-e)/(1-e));n.push(a[0]),t===l.length-1&&n.push(a[a.length-1]),p=a[1]}}if(a){let e,t,l=[];return n.forEach(a=>{e={type:"",values:[]},a.shift(),t=a.map(e=>Object.values(e)).flat(),e.values=t,3===a.length?e.type="C":2===a.length?e.type="Q":1===a.length&&(e.type="L"),l.push(e)}),l}return n}(e,t,y);n.push(...l),o+=l.length}else n.push({type:s,values:t})}else n.push({type:s,values:t});return{pathData:n,count:o}}function z(e,t=0,l=1){let a=[e[0]],n={x:e[0].values[0],y:e[0].values[1]},s={x:e[0].values[0],y:e[0].values[1]},r=e.length;for(let p=1;r&&p<r;p++){let r=e[p],{type:u,values:y}=r,h=y.slice(-2);if(h[0],h[1],"C"!==u&&"Q"!==u)a.push(r);else if("C"===u||"Q"===u){let e=T(n,y,t,l).pathData;a.push(...e)}n={x:h[0],y:h[1]},"z"===u.toLowerCase()?n=s:"M"===u&&(s={x:h[0],y:h[1]})}return a}function E(e,t=-1){let l=e.map(e=>e.x),a=e.map(e=>e.y),n=Math.min(...l),s=Math.max(...l),r=Math.min(...a),p=Math.max(...a),u={x:n,left:n,right:s,y:r,top:r,bottom:p,width:s-n,height:p-r};if(t>-1)for(let e in u)u[e]=+u[e].toFixed(t);return u}function F(e){let t=[];return e.forEach(e=>{let l=function(e){let t=function(e){let t=[];for(let l=0;l<e.length;l++){let a=e[l],n=l>0?e[l-1]:e[l],{type:s,values:r}=a,p={x:n.values[n.values.length-2],y:n.values[n.values.length-1]},u=r.length?{x:r[r.length-2],y:r[r.length-1]}:"",y=r.length?{x:r[0],y:r[1]}:"";switch(s){case"A":if("function"!=typeof arcToBezier){let e=b(p,u)/2,l=A(p,u,.5),a=L(l.x,l.y,e,e,0),n=L(l.x,l.y,e,e,Math.PI);t.push(a,n,u);break}arcToBezier(p,r).forEach(e=>{let l=e.values,a={x:l[0],y:l[1]},n={x:l[2],y:l[3]},s={x:l[4],y:l[5]};t.push(a,n,s)});break;case"C":let e={x:r[2],y:r[3]};t.push(y,e);break;case"Q":t.push(y)}"z"!==s.toLowerCase()&&t.push(u)}return t}(e),l=E(t);return l}(e);t.push(l)}),t}function q(e,t){let[l,a,n,s,r,p]=[e.x,e.y,e.width,e.height,e.x+e.width,e.y+e.height],[u,y,h,i,c,o]=[t.x,t.y,t.width,t.height,t.x+t.width,t.y+t.height],x=!1;return n*s!=h*i&&n*s>h*i&&l<u&&r>c&&a<y&&p>o&&(x=!0),x}function D(t,l=9){let a=0,s=[],p=Q(t),u=p.length>1,y=[];if(u){let e=F(p);e.forEach(function(t,l){for(let l=0;l<e.length;l++){let a=e[l];if(t!=a){q(t,a)&&y.push(l)}}})}return p.forEach((t,l)=>{s=[];let p=0,u=0,h=1,i=[];t.forEach(function(l,a){let[u,y]=[l.type,l.values],h=y.length;if(y.length){let c=(a>0?t[a-1]:t[0]).values,o=c.length,x={x:c[o-2],y:c[o-1]},g={x:y[h-2],y:y[h-1]};if("C"===u||"Q"===u){let e={x:y[0],y:y[1]};i="C"===u?[x,e,{x:y[2],y:y[3]},g]:[x,e,g];let t=Math.abs(function(e,t=!1){let l,[a,n,s,r]=[e[0],e[1],e[2],e[e.length-1]];if(e.length<3)return 0;3===e.length&&(n={x:1*e[0].x/3+2*e[1].x/3,y:1*e[0].y/3+2*e[1].y/3},s={x:1*e[2].x/3+2*e[1].x/3,y:1*e[2].y/3+2*e[1].y/3});return l=3*(a.x*(-2*n.y-s.y+3*r.y)+n.x*(2*a.y-s.y-r.y)+s.x*(a.y+n.y-2*r.y)+r.x*(-3*a.y+n.y+2*s.y))/20,t?Math.abs(l):l}(i));p+=t,s.push(x,g)}else if("A"===u){let t=function(t,l,a,s,p,u,y,h,i){const c=(e,t,l,a)=>n(a-t,l-e);let o={cx:0,cy:0,rx:a=e(a),ry:s=e(s),startAngle:0,endAngle:0,deltaAngle:0,clockwise:y,xAxisRotation:p,largeArc:u,sweep:y};if(0==a||0==s)throw Error("rx and ry can not be 0");if(a===s){let e=Math.abs(h-t),a=Math.abs(i-l),n=e,s=Math.min(t,h),r=Math.min(l,i),p=.5*Math.PI;if(0===e&&a||0===a&&e)return n=0===e&&a?a/2:e/2,o.rx=n,o.ry=n,0===e&&a?(o.cx=t,o.cy=r+a/2,o.startAngle=l>i?p:-p,o.endAngle=l>i?-p:p,o.deltaAngle=y?Math.PI:-Math.PI):0===a&&e&&(o.cx=s+e/2,o.cy=l,o.startAngle=t>h?Math.PI:0,o.endAngle=t>h?-Math.PI:Math.PI,o.deltaAngle=y?Math.PI:-Math.PI),o}let x,g,d=a===s?0:p*M/180,m=d?f(d):0,b=d?r(d):1,C=(t-h)/2,A=(l-i)/2,w=(t+h)/2,L=(l+i)/2,P=d?b*C+m*A:C,I=d?b*A-m*C:A,$=P*P/(a*a)+I*I/(s*s);$>1&&(a*=v($),s*=v($),o.rx=a,o.ry=s);let k=a*s,Q=a*I,S=s*P,T=Q**2+S**2;if(!T)throw Error("start point can not be same as end point");let z=v(e((k*k-T)/T));u==y&&(z=-z);let E=z*Q/s,F=-z*S/a;x=d?b*E-m*F+w:w+E,g=d?m*E+b*F+L:L+F,o.cy=g,o.cx=x;let q=c(x,g,t,l),D=c(x,g,h,i);!y&&D>q&&(D-=2*Math.PI),y&&q>D&&(D=D<=0?D+2*Math.PI:D);let Z=D-q;return o.startAngle=q,o.endAngle=D,o.deltaAngle=Z,o}(x.x,x.y,l.values[0],l.values[1],l.values[2],l.values[3],l.values[4],g.x,g.y),{cx:a,cy:u,rx:y,ry:h,startAngle:i,endAngle:c,deltaAngle:o}=t,d=Math.abs(function(e,t,l,a){const n=Math.PI*e*t;let s=(a-l+2*Math.PI)%(2*Math.PI);if(e===t)return n*(s/(2*Math.PI));const r=l=>Math.atan2(e*Math.sin(l),t*Math.cos(l));return l=r(l),a=r(a),s=(a-l+2*Math.PI)%(2*Math.PI),n*(s/(2*Math.PI))}(y,h,i,c));d-=Math.abs(Z([x,{x:a,y:u},g])),s.push(x,g),p+=d}else s.push(x,g)}});let c=Z(s);-1!==y.indexOf(l)&&(h=-1),u=c<0&&p<0?(Math.abs(p)-Math.abs(c))*h:(Math.abs(p)+Math.abs(c))*h,a+=u}),a}function Z(e,t=!1){let l=0;for(let t=0,a=e.length;a&&t<a;t++){l+=e[t].x*e[t===e.length-1?0:t+1].y*.5-e[t===e.length-1?0:t+1].x*e[t].y*.5}return t&&(l=Math.abs(l)),l}function j(e,t=0){let l=(t=parseFloat(t))>1,a=!l&&!t;"l"===e[1].type&&a&&(e[0].type="m");let n="",s=l?"\n":" ";n=a?`${e[0].type} ${e[0].values.join(" ")}`:`${e[0].type} ${e[0].values.join(" ")}${s}`;for(let t=1,l=e.length;t<l;t++){let l=e[t-1],r=e[t],{type:p,values:u}=r;if(!a||"A"!==p&&"a"!==p||(u=[u[0],u[1],u[2],`${u[3]}${u[4]}${u[5]}`,u[6]]),p=l.type===r.type&&"m"!==r.type.toLowerCase()&&a||("m"===l.type&&"l"===r.type||"M"===l.type&&"l"===r.type||"M"===l.type&&"L"===r.type)&&a?" ":r.type,a){let e="",t=!1;for(let l=0,a=u.length;l<a;l++){let a=u[l],n=a.toString(),s=n.includes(".")&&Math.abs(a)<1;s&&t&&(n=n.replace(/^0\./,".")),!(l>0)||t&&s||(e+=" "),e+=n,t=s}n+=`${p}${e}`}else n+=`${p} ${u.join(" ")}${s}`}return a&&(n=n.replace(/ 0\./g," .").replace(/ -/g,"-").replace(/-0\./g,"-.").replace(/Z/g,"z")),n}function O(e,t,l=!1,a=1){let n=[e,t],s=function(e,t){let l=m(e.p0,e.cp1,t.cp2,t.p,!1),a=m(l,t.p,t.p0,t.cp1,!1),n=b(l,t.p),s=b(a,t.p),r=1-s/n,p=b(e.cp2,e.p),u=b(e.cp2,t.cp1);return r=Math.min(p)/u,r}(e,t),r=k(e.p0,e.p),p=k(t.p0,t.p),u=.05*Math.min(r,p)*a,y=function(e,t,l=0,a=0){let{p0:n,cp1:s}=e,{p:r,cp2:p}=t,u={x:(s.x-(1-l)*n.x)/l,y:(s.y-(1-l)*n.y)/l},y={x:(p.x-a*r.x)/(1-a),y:(p.y-a*r.y)/(1-a)},h={p0:n,cp1:u,cp2:y,p:r};return h}(e,t,s,s),h=w([y.p0,y.cp1,y.cp2,y.p],s),i=k(e.p,h),c=0,o=0,x=!1,f=i;if(i<u){let l=.5*(1+s);if(c=k(w([t.p0,t.cp1,t.cp2,t.p],.5),w([y.p0,y.cp1,y.cp2,y.p],l)),f+=c,c<u){let t=.5*s;o=k(w([e.p0,e.cp1,e.cp2,e.p],.5),w([y.p0,y.cp1,y.cp2,y.p],t)),c+o<u&&(x=!0),f+=o}}if(l&&!x){let l=function(e,t,l=0,a=1){const n=(e,t,l,a,n)=>{let s=1-n;return{x:3*s*s*(t.x-e.x)+6*s*n*(l.x-t.x)+3*n*n*(a.x-l.x),y:3*s*s*(t.y-e.y)+6*s*n*(l.y-t.y)+3*n*n*(a.y-l.y)}};let s=[e,t],r=C(e.p0,e.p)>C(t.p0,t.p),p=JSON.parse(JSON.stringify(e)),u=JSON.parse(JSON.stringify(t)),y=m(p.p0,p.cp1,u.p,u.cp2,!1);if(!y)return s;if(r){let l={p0:{x:e.p.x,y:e.p.y},cp1:{x:e.cp2.x,y:e.cp2.y},cp2:{x:e.cp1.x,y:e.cp1.y},p:{x:e.p0.x,y:e.p0.y}};e={p0:{x:t.p.x,y:t.p.y},cp1:{x:t.cp2.x,y:t.cp2.y},cp2:{x:t.cp1.x,y:t.cp1.y},p:{x:t.p0.x,y:t.p0.y}},t=l}let h=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),i=(e,t)=>({x:e.x*t,y:e.y*t}),c=(e,t)=>e.x*t.x+e.y*t.y,o=t.p0,x=n(t.p0,t.cp1,t.cp2,t.p,0),f=c(h(e.p0,o),x)/c(x,x),v=w([t.p0,t.cp1,t.cp2,t.p],f),g=n(t.p0,t.cp1,t.cp2,t.p,f);f-=c(h(v,e.p0),g)/c(g,g);let M=w([t.p0,t.cp1,t.cp2,t.p],f),d=t.p,b=n(t.p0,t.cp1,t.cp2,t.p,f),L=n(t.p0,t.cp1,t.cp2,t.p,1),P=1-f,I=($=M,Q=i(b,P/3),{x:$.x+Q.x,y:$.y+Q.y});var $,Q;let S=h(d,i(L,P/3)),T={p0:M,cp1:I,cp2:S,p:d};r&&(T={p0:d,cp1:S,cp2:I,p:M});let z=w([T.p0,T.cp1,T.cp2,T.p],.5,!1,!0),E=z.cpts[2],F=m(z,E,T.p0,y,!1),q=m(z,E,T.p,y,!1),Z=A(T.p0,F,1.333),O=A(T.p,q,1.333);if(m(p.p0,Z,u.p,O,!0))return s;T.cp1=Z,T.cp2=O;let R=k(p.p0,T.p0)+k(u.p,T.p);if(T.p0=p.p0,T.p=u.p,T.extreme=u.extreme,T.corner=u.corner,T.dimA=u.dimA,T.directionChange=u.directionChange,T.values=[T.cp1.x,T.cp1.y,T.cp2.x,T.cp2.y,T.p.x,T.p.y],R<l){let e=D([{type:"M",values:[p.p0.x,p.p0.y]},{type:"C",values:[p.cp1.x,p.cp1.y,p.cp2.x,p.cp2.y,p.p.x,p.p.y]},{type:"C",values:[u.cp1.x,u.cp1.y,u.cp2.x,u.cp2.y,u.p.x,u.p.y]}]),t=[{type:"M",values:[T.p0.x,T.p0.y]},{type:"C",values:[T.cp1.x,T.cp1.y,T.cp2.x,T.cp2.y,T.p.x,T.p.y]}],l=D(t),n=Math.abs(l/e-1);T.error=10*n*a,j(t),n<.01&&(s=[T])}return s}(e,t,u,a);1===l.length&&(x=!0,y=l[0],f=y.error)}return x&&(y.p0=e.p0,y.p=t.p,y.dimA=k(y.p0,y.p),y.type="C",y.extreme=t.extreme,y.directionChange=t.directionChange,y.corner=t.corner,y.values=[y.cp1.x,y.cp1.y,y.cp2.x,y.cp2.y,y.p.x,y.p.y],y.error=f/u,n=[y]),n}function R(e=[]){let t,l=[],a=function(e){let t=[],l={x:e[0].values[0],y:e[0].values[1]};return e.forEach(e=>{let{type:a,values:n}=e;if(n.length){let e=n.length>1?{x:n[n.length-2],y:n[n.length-1]}:"V"===a?{x:l.x,y:n[0]}:{x:n[0],y:l.y};t.push(e),l=e}}),t}(e),n=E(a),{left:s,right:r,top:p,bottom:u,width:y,height:h}=n,i=e[0].values[0],c=e[0].values[1],o={x:e[0].values[0],y:e[0].values[1]},x={x:e[0].values[0],y:e[0].values[1]};e[0].idx=0,e[0].p0=o,e[0].p=o,e[0].lineto=!1,e[0].corner=!1,e[0].extreme=!1,e[0].directionChange=!1,e[0].closePath=!1,e[0].dimA=0;let f=[e[0]],v=0,g=e.length;for(let l=2;g&&l<=g;l++){let a=e[l-1],{type:n,values:y}=a,h=y.slice(-2),g=[x],M=!1;a.idx=l-1,a.lineto=!1,a.corner=!1,a.extreme=!1,a.directionChange=!1,a.closePath=!1,a.dimA=0;let m,b,A,w,L,I,Q,S=.05;t=h.length?{x:h[0],y:h[1]}:o,"M"===n?(o=t,x=t):"z"===n.toLowerCase()&&(t=o),a.p0=x,a.p=t;let T=k(x,t);if(a.dimA=T,"L"===n&&(a.lineto=!0),"Z"===n&&(a.closePath=!0,o.x!==i&&o.y!==c&&(a.lineto=!0)),"Q"!==n&&"C"!==n||(m={x:y[0],y:y[1]},b="C"===n?{x:y[2],y:y[3]}:null,a.cp1=m,b&&(a.cp2=b)),y.length>2){"Q"!==n&&"C"!==n||g.push(m),"C"===n&&g.push(b),g.push(t),M=$(g).flat,a.flat=M,M&&(a.extreme=!1)}M||"L"===n||t.x!==s&&t.y!==p&&t.x!==r&&t.y!==u||(a.extreme=!0);let z=e[l]?e[l]:null,E=z?z.values.slice(-2):null;I=z?z.type:null,!z||"Q"!==z.type&&"C"!==z.type||(L=z?{x:E[0],y:E[1]}:null,A={x:z.values[0],y:z.values[1]},w="C"===z.type?{x:z.values[2],y:z.values[3]}:null),Q=Z(g);let F=v<0&&Q>0||v>0&&Q<0;if(v=Q,F&&(a.directionChange=!0),("Q"===n||"C"===n)&&("Q"===n&&"Q"===I||"C"===n&&"C"===I)){let e=g.slice(1),l=$("C"===n?[t,A,w,L]:[t,A,L],((L?Math.abs(L.x-x.x):0)+(L?Math.abs(L.y-x.y):0))/2*.1).flat;if((!M||!l)&&(!!a.extreme||P(0,e,S)))a.extreme=!0;else{let e=b?[b,t]:[m,t],l=[t,A],n=d(...e,!0),s=d(...l,!0),r=180*Math.abs(n-s)/Math.PI,p=C(...e),u=C(...l);r>10&&p&&u&&(a.corner=!0)}}f.push(a),x=t}return l={pathData:f,bb:n,dimA:(y+h)/2},l}function J(e,t=-1){let l=!("auto"!=t||!e[0].hasOwnProperty("decimals"));for(let a=0,n=e.length;a<n;a++){let n=e[a];(t>-1||l)&&(t=l?n.decimals:t,e[a].values=n.values.map(e=>e?+e.toFixed(t):e))}return e}function N(e={},t={},l={},a={}){let n=A(e,t,1.5),s=A(a,l,1.5),r=.01*k(e,a),p=k(n,s),u=null,y="C",h=[t.x,t.y,l.x,l.y,a.x,a.y];return p<r&&(u=m(e,t,a,l,!1),u&&(y="Q",h=[u.x,u.y,a.x,a.y])),{type:y,values:h}}function B(e,{toShorthands:t=!0,toRelative:l=!0,decimals:a=3}={}){return t&&(e=function(e,t=-1,l=!0){let a;if(l){let t=e.map(e=>e.type).join("");a=/[astvqmhlc]/g.test(t)}e=l&&a?U(e,t):e;let n={type:"M",values:e[0].values};e[0].decimals&&(n.decimals=e[0].decimals);let s,r=[n],p={x:e[0].values[0],y:e[0].values[1]},u=.01;for(let l=1,a=e.length;l<a;l++){let a=e[l],{type:y,values:h}=a,i=h.slice(-2),c=e[l-1],o=c.type;s={x:i[0],y:i[1]};let x,f,v,g,M={x:h[0],y:h[1]},d=Math.abs(s.x-p.x),m=Math.abs(s.y-p.y),b=(d+m)/2*u;switch(y){case"L":n=0===m||m<b&&d>b?{type:"H",values:[h[0]]}:0===d||m>b&&d<b?{type:"V",values:[h[1]]}:a;break;case"Q":if("Q"!==o){p={x:i[0],y:i[1]},r.push(a);continue}let e={x:c.values[0],y:c.values[1]};g={x:2*p.x-e.x,y:2*p.y-e.y},x=Math.abs(M.x-g.x),f=Math.abs(M.y-g.y),v=(x+f)/2,n=v<b?{type:"T",values:[s.x,s.y]}:a;break;case"C":let t={x:h[2],y:h[3]};if("C"!==o){r.push(a),p={x:i[0],y:i[1]};continue}let l={x:c.values[2],y:c.values[3]};g={x:2*p.x-l.x,y:2*p.y-l.y},x=Math.abs(M.x-g.x),f=Math.abs(M.y-g.y),v=(x+f)/2,n=v<b?{type:"S",values:[t.x,t.y,s.x,s.y]}:a;break;default:n={type:y,values:h}}(a.decimals||0===a.decimals)&&(n.decimals=a.decimals),t>-1&&(n.values=n.values.map(e=>+e.toFixed(t))),p={x:i[0],y:i[1]},r.push(n)}return r}(e)),e=J(e,a),l&&(e=function(e,t=-1){return V(e,!0,t)}(e)),a>-1&&(e=J(e,a)),e}function H(e,t){Array.isArray(e)&&(e={x:e[0],y:e[1]});let l={x:e.x+2/3*(t[0]-e.x),y:e.y+2/3*(t[1]-e.y)},a={x:t[2]+2/3*(t[0]-t[2]),y:t[3]+2/3*(t[1]-t[3])};return{type:"C",values:[l.x,l.y,a.x,a.y,t[2],t[3]]}}function V(e,t=!1,l=-1){l>=0&&(e[0].values=e[0].values.map(e=>+e.toFixed(l)));let a=e[0].values,n=a[0],s=a[1],r=n,p=s;for(let a=1,u=e.length;a<u;a++){let u=e[a],{type:y,values:h}=u,i=t?y.toLowerCase():y.toUpperCase();if(y!==i)switch(y=i,u.type=y,y){case"a":case"A":h[5]=t?h[5]-n:h[5]+n,h[6]=t?h[6]-s:h[6]+s;break;case"v":case"V":h[0]=t?h[0]-s:h[0]+s;break;case"h":case"H":h[0]=t?h[0]-n:h[0]+n;break;case"m":case"M":t?(h[0]-=n,h[1]-=s):(h[0]+=n,h[1]+=s),r=t?h[0]+n:h[0],p=t?h[1]+s:h[1];break;default:if(h.length)for(let e=0;e<h.length;e++)h[e]=t?h[e]-(e%2?s:n):h[e]+(e%2?s:n)}let c=h.length;switch(y){case"z":case"Z":n=r,s=p;break;case"h":case"H":n=t?n+h[0]:h[0];break;case"v":case"V":s=t?s+h[0]:h[0];break;case"m":case"M":r=h[c-2]+(t?n:0),p=h[c-1]+(t?s:0);default:n=h[c-2]+(t?n:0),s=h[c-1]+(t?s:0)}l>=0&&(u.values=u.values.map(e=>+e.toFixed(l)))}return e}function U(e,t=-1){return V(e,!1,t)}function G(e,t,l=1){const a=2*Math.PI;let[n,s,r,p,u,y,h]=t;if(0===n||0===s)return[];let i=r?r*a/360:0,c=i?Math.sin(i):0,o=i?Math.cos(i):1,x=o*(e.x-y)/2+c*(e.y-h)/2,f=-c*(e.x-y)/2+o*(e.y-h)/2;if(0===x&&0===f)return[];n=Math.abs(n),s=Math.abs(s);let v=x*x/(n*n)+f*f/(s*s);if(v>1){let e=Math.sqrt(v);n*=e,s*=e}let g=n*n,M=n===s?g:s*s,d=x*x,m=f*f,b=g*M-g*m-M*d;b<=0?b=0:(b/=g*m+M*d,b=Math.sqrt(b)*(p===u?-1:1));let C=b?b*n/s*f:0,A=b?b*-s/n*x:0,w=o*C-c*A+(e.x+y)/2,L=c*C+o*A+(e.y+h)/2,P=(x-C)/n,I=(f-A)/s,$=(-x-C)/n,k=(-f-A)/s;const Q=(e,t,l,a)=>{let n=+(e*l+t*a).toFixed(9);return 1===n||-1===n?1===n?0:Math.PI:(n=n>1?1:n<-1?-1:n,(e*a-t*l<0?-1:1)*Math.acos(n))};let S=Q(1,0,P,I),T=Q(P,I,$,k);0===u&&T>0?T-=2*Math.PI:1===u&&T<0&&(T+=2*Math.PI);let z=(+(Math.abs(T)/(a/4)).toFixed(0)||1)*l;T/=z;let E=[];const F=1.5707963267948966,q=.551785;let D=T===F?q:T===-F?-q:4/3*Math.tan(T/4),Z=T?Math.cos(T):1,j=T?Math.sin(T):0;const O=(e,t,l,a,n)=>{let s=e!=t?Math.cos(e):a,r=e!=t?Math.sin(e):n,p=Math.cos(e+t),u=Math.sin(e+t);return[{x:s-r*l,y:r+s*l},{x:p+u*l,y:u-p*l},{x:p,y:u}]};for(let e=0;e<z;e++){let e={type:"C",values:[]};O(S,T,D,Z,j).forEach(t=>{let l=t.x*n,a=t.y*s;e.values.push(o*l-c*a+w,c*l+o*a+L)}),E.push(e),S+=T}return E}function K(e,t,l,a,n=7.5){let s={type:"C",values:[t.x,t.y,l.x,l.y,a.x,a.y]},r=0,p=!1,u=d(e,t,!0),y=d(a,l,!0),h=180*Math.abs(u-y)/Math.PI;if(Math.abs(h%180-90)<3){let u=m(e,t,a,l,!1);if(u){let y=b(e,u),h=b(a,u),i=+Math.max(y,h).toFixed(8),c=+Math.min(y,h).toFixed(8),o=c,x=i,f=Z([e,t,l,a])<0?0:1,v=Math.abs(a.x-e.x)>Math.abs(a.y-e.y);100/o*Math.abs(o-x)<5&&(o=i,x=o),v&&(o=i,x=c);let g=D([{type:"M",values:[e.x,e.y]},{type:"C",values:[t.x,t.y,l.x,l.y,a.x,a.y]}]),M={type:"A",values:[o,x,0,0,f,a.x,a.y]};r=Math.PI*(o*x)/4,r-=Math.abs(Z([e,a,u])),function(e,t){let l=Math.abs(e-t);return Math.abs(100-100/e*(e+l))}(g,r)<n&&(p=!0,s=M)}}return{com:s,isArc:p,area:r}}function W(e){let t,l=[[]],a=0,n=[[]],s={x:e[0].values[0],y:e[0].values[1]};for(let r=0,p=e.length;r<p;r++){let p=e[r],{type:u,values:y}=p;if("A"===u){let u=e[r-1].values.slice(-2);s={x:u[0],y:u[1]};let[h,i,c,o,x,f,v]=y,g=100/h*Math.abs(h-i)<5;t={x:y[5],y:y[6]},p.p0=s,p.p=t,p.circular=g;let M=e[r+1];if(!l[a].length&&M&&"A"===M.type&&(l[a].push(p),n[a].push(r)),M&&"A"===M.type){let[e,p,u,y,c,o,x]=M.values,f=h!=e?100/h*Math.abs(h-e):0,v=i!=p?100/i*Math.abs(i-p):0;t={x:M.values[5],y:M.values[6]},M.p0=s,M.p=t,f<5&&v<5?(l[a].push(M),n[a].push(r+1)):(l.push([]),n.push([]),a++)}else l.push([]),n.push([]),a++}}if(!n.length)return e;l=l.filter(e=>e.length),n=n.filter(e=>e.length);for(let t=l.length-1;t>=0;t--){const a=l[t],s=n[t][0],r=a.length;let p=0,u=0;a.forEach(({values:e})=>{const[t,l]=e;p+=t,u+=l}),p/=r,u/=r;let y=100/p*Math.abs(p-u)<5;y&&(p=(p+u)/2,u=p);let h=e[s-1].values.slice(-2);if(h[0],h[1],4===r){let[t,l,n,h,i,c,o]=a[1].values,[,,,,,x,f]=a[3].values;y&&(p=1,u=1);let v={type:"A",values:[p,u,n,h,i,c,o]},g={type:"A",values:[p,u,n,h,i,x,f]};e.splice(s,r,v,g)}else if(3===r){let[t,l,n,y,h,i,c]=a[0].values,[o,x,,,,f,v]=a[2].values;y=1;let g={type:"A",values:[p,u,n,y,h,f,v]};e.splice(s,r,g)}else if(2===r){let[t,l,n,h,i,c,o]=a[0].values,[x,f,,,,v,g]=a[1].values;y&&(p=1,u=1,n=0);let{p0:M,p:d}=a[0],[m,b]=[a[1].p0,a[1].p];if(M.x!==b.x||M.y!==b.y){let t={type:"A",values:[p,u,n,h,i,v,g]};e.splice(s,r,t)}}}return e}function X(e=[],{toAbsolute:t=!0,toLonghands:l=!0,quadraticToCubic:a=!1,arcToCubic:n=!1,arcAccuracy:s=2}={},{hasRelatives:r=!0,hasShorthands:p=!0,hasQuadratics:u=!0,hasArcs:y=!0,testTypes:h=!1}={}){if(h){let t=Array.from(new Set(e.map(e=>e.type))).join("");r=/[lcqamts]/gi.test(t),u=/[qt]/gi.test(t),y=/[a]/gi.test(t),p=/[vhst]/gi.test(t),isPoly=/[mlz]/gi.test(t)}return(u&&a||y&&n)&&(l=!0,t=!0),r&&t&&(e=V(e,!1)),p&&l&&(e=function(e,t=-1,l=!0){let a=!1;if(l){let t=e.map(e=>e.type).join(""),l=/[hstv]/gi.test(t);if(a=/[astvqmhlc]/g.test(t),!l)return e}let n=[],s={type:"M",values:(e=l&&a?U(e,t):e)[0].values};n.push(s);for(let l=1,a=e.length;l<a;l++){let a,r,p,u,y,h,i,c,o=e[l],{type:x,values:f}=o,v=f.length,g=s.values,M=g.length,[d,m]=[f[v-2],f[v-1]],[b,C]=[g[M-2],g[M-1]];switch(x){case"H":s={type:"L",values:[f[0],C]};break;case"V":s={type:"L",values:[b,f[0]]};break;case"T":[a,r]=[g[0],g[1]],[b,C]=[g[M-2],g[M-1]],p=b+(b-a),u=C+(C-r),s={type:"Q",values:[p,u,d,m]};break;case"S":[a,r]=[g[0],g[1]],[b,C]=[g[M-2],g[M-1]],[i,c]=M>2&&"A"!==s.type?[g[2],g[3]]:[b,C],p=2*b-i,u=2*C-c,y=f[0],h=f[1],s={type:"C",values:[p,u,y,h,d,m]};break;default:s={type:x,values:f}}t>-1&&(s.values=s.values.map(e=>+e.toFixed(t))),n.push(s)}return n}(e,-1,!1)),y&&n&&(e=function(e,{arcAccuracy:t=1}={}){let l=[e[0]];for(let a=1,n=e.length;a<n;a++){let n=e[a],s=e[a-1].values,r=s.length,p={x:s[r-2],y:s[r-1]};"A"===n.type?G(p,n.values,t).forEach(e=>{l.push(e)}):l.push(n)}return l}(e,s)),u&&a&&(e=function(e){let t=[e[0]];for(let l=1,a=e.length;l<a;l++){let a=e[l],n=e[l-1].values,s=n.length,r={x:n[s-2],y:n[s-1]};"Q"===a.type?t.push(H(r,a.values)):t.push(a)}return t}(e)),e}function Y(e,{toAbsolute:t=!0,toLonghands:l=!0,quadraticToCubic:a=!1,arcToCubic:n=!1,arcAccuracy:s=4}={}){let r=function(e,t=!0){if(e=e.trim(),""===e)return{pathData:[],hasRelatives:!1,hasShorthands:!1,hasQuadratics:!1,hasArcs:!1};const l=new Set([5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279]),a=e=>32===e||44===e||10===e||13===e||8232===e||8233===e||9===e||11===e||12===e||160===e||e>=5760&&l.has(e);let n,s=0,r=e.length,p="",u=[],y=-1,h="",i=!1,c=0,o=0,x=0,f=!1,v=new Set([]),g=[];const M=()=>{f&&("M"===p?p="L":"m"===p&&(p="l"),u.push({type:p,values:[]}),y++,o=0,f=!1)},d=(e=!1)=>{(e?c>0:""!==h)&&(t&&-1===y&&(n="Pathdata must start with M command",g.push(n),p="M",u.push({type:p,values:[]}),x=2,o=0,y++),"A"===p||"a"===p?(h=m(),u[y].values.push(...h)):(t&&h[1]&&"."!==h[1]&&"0"===h[0]&&(n=`${y}. command: Leading zeros not valid: ${h}`,g.push(n)),u[y].values.push(+h)),o++,h="",c=0,f=o>=x)},m=()=>{let e=h.length,t=!1;return 3===o&&2===e||4===o&&e>1?(h=[+h[0],+h[1]],t=!0,o++):3===o&&e>=3&&(h=[+h[0],+h[1],+h.substring(2)],t=!0,o+=2),t?h:[+h]},b=()=>{if(y>0){let e=u[y].values.length;if(e&&e<x||e&&e>x||("z"===p||"Z"===p)&&e>0){n=`${y}. command of type "${p}": ${x-e} values too few - ${x} expected`,g[g.length-1]!==n&&g.push(n)}}};let C=!1,A=!1,w=!1;for(;s<r;){let l=e.charCodeAt(s),r=l>47&&l<58;if(r||(C=101===l||69===l,A=45===l||43===l,w=46===l),r||A||w||C){if(i||45!==l&&46!==l)M();else{let e=46===l;d(e),M(),e&&c++}h+=e[s],i=C,s++}else if((l<48||l>5759)&&a(l))d(),s++;else{if(l>64){if(!_.has(l)){n=`${y}. command "${e[s]}" is not a valid type`,g.push(n),s++;continue}""!==h&&(u[y].values.push(+h),o++,h=""),t&&b(),p=e[s],x=ee[l];let a="M"===p||"m"===p,r=y>0&&("z"===u[y].type||"Z"===u[y].type);v.add(p),r&&!a&&(u.push({type:"m",values:[0,0]}),y++),u.push({type:p,values:[]}),y++,c=0,o=0,f=!1,s++;continue}r||(n=`${y}. ${e[s]} is not a valid separarator or token`,g.push(n),h=""),s++}}d(),t&&b();if(t&&g.length){if(n="Invalid path data:\n"+g.join("\n"),"log"!==t)throw new Error(n);console.log(n)}u[0].type="M";let L=Array.from(v).join(""),P=/[lcqamts]/g.test(L),I=/[vhst]/gi.test(L),$=/[a]/gi.test(L),k=/[qt]/gi.test(L);return{pathData:u,hasRelatives:P,hasShorthands:I,hasQuadratics:k,hasArcs:$}}(e),{hasRelatives:p,hasShorthands:u,hasQuadratics:y,hasArcs:h}=r,i=r.pathData;return i=X(i,{toAbsolute:t,toLonghands:l,quadraticToCubic:a,arcToCubic:n,arcAccuracy:s},{hasRelatives:p,hasShorthands:u,hasQuadratics:y,hasArcs:h}),i}const _=new Set([77,109,65,97,67,99,76,108,81,113,83,115,84,116,72,104,86,118,90,122]),ee=new Uint8Array(128);function te(e,t=1,l=!0){let a=[e[0]],n={x:e[0].values[0],y:e[0].values[1]},s=n,r=n;e[e.length-1].type.toLowerCase();for(let p=1,u=e.length;p<u;p++){let y=e[p-1],h=e[p],i=e[p+1]||e[u-1],c="Z"===i.type?n:{x:i.values[i.values.length-2],y:i.values[i.values.length-1]},{type:o,values:x}=h,f=x.slice(-2);r="Z"!==o?{x:f[0],y:f[1]}:n;let v="C"===o?[{x:x[0],y:x[1]},{x:x[2],y:x[3]}]:"Q"===o?[{x:x[0],y:x[1]}]:[],g=Z([s,...v,r,c],!0),M=C(s,r),d=g<M/500*t;if(l||"C"!==o||(d=!1),l&&"C"===o){Z([s,...v,r],!0)<M/1e3&&"C"!==y.type&&(h.type="L",h.values=f)}s=r,"A"!==o&&d&&p<u-1||("M"===o?(n=r,s=n):"Z"===o&&(s=n),a.push(h))}return a}function le(e){let t={x:e[0].values[0],y:e[0].values[1]},l=t,a=[e[0]];for(let n=1,s=e.length;n<s;n++){let s=e[n],{type:r,values:p}=s,u=p.slice(-2);l={x:u[0],y:u[1]},"L"===r&&l.x===t.x&&l.y===t.y||(a.push(s),t=l)}return a}function ae(e,t=!1,l=!0){let a=[],n=e.length,s=e[0].values[0],r=e[0].values[1],p="z"===e[n-1].type.toLowerCase(),u=e.filter(e=>"L"===e.type),y=e[n-2],h=y.type,i=y.values.slice(-2).map(e=>+e.toFixed(8)),c=i[0]===s&&i[1]===r,o="L"!==e[1].type&&(!c||"L"===h);if(o=!1,!p)return e;let x=0;{let t=[];for(let l=0,a=e.length;l<a;l++){let a=e[l],{type:n,values:s}=a;if(s.length){let a=s.slice(-2),r=e[l-1]&&"L"===e[l-1].type,p=e[l+1]&&"L"===e[l+1].type,u=e[l-1]?e[l-1].type.toUpperCase():null,y=e[l+1]?e[l+1].type.toUpperCase():null,h={type:n,x:a[0],y:a[1],dist:0,index:0,prevL:r,nextL:p,prevCom:u,nextCom:y};h.index=l,t.push(h)}}if(u.length){let e=t.filter(e=>"L"!==e.type&&"M"!==e.type&&e.prevCom&&"L"===e.prevCom||"M"===e.prevCom&&"L"===h).sort((e,t)=>e.y-t.y||e.x-t.x)[0];x=e?e.index-1:0}else t=t.sort((e,t)=>+e.y.toFixed(1)-+t.y.toFixed(1)||e.x-t.x),x=t[0].index;e=x?function(e,t){let l=e.length,a=0,n=e[l-1].type,s="z"===n.toLowerCase();if(!s||t<1||e.length<3)return e;let r=s?1:0;(function(e){let t=e.length,l="z"===e[t-1].type.toLowerCase(),a=e[0],[n,s]=[a.values[0],a.values[1]].map(e=>+e.toFixed(8)),r=l?e[t-2]:e[t-1],p=r.values.length,[u,y]=[r.values[p-2],r.values[p-1]].map(e=>+e.toFixed(8));!l||n==u&&s==y||(e.pop(),e.push({type:"L",values:[n,s]},{type:"Z",values:[]}))})(e),a=t+1<e.length-1?t+1:e.length-1-r;let p=e.slice(a),u=e.slice(0,a);u.shift();let y,h,i=u.length;y=u[i-1].values||[],h=[y[y.length-2],y[y.length-1]],r&&(p.pop(),u.push({type:"Z",values:[]}));return e=[{type:"M",values:h},...p,...u],e}(e,x):e}return n=e.length,y=e[n-2],h=y.type,i=y.values.slice(-2),c="L"===h&&i[0]===s&&i[1]===r,t&&c&&e.splice(n-2,1),a.push(...e),a}function ne(e,{arcToCubic:t=!1,quadraticToCubic:l=!1,toClockwise:a=!1,returnD:n=!1}={}){const s=(e,t)=>{let l=[],a=[];if("A"!==e){for(let e=0;e<t.length;e+=2)l.push([t[e],t[e+1]]);a=l.pop(),l.reverse()}else{let e=0==t[4]?1:0;l=[t[0],t[1],t[2],t[3],e],a=[t[5],t[6]]}return{controlPoints:l,endPoints:a}};let r=[],p="z"===e[e.length-1].type.toLowerCase();p&&(e=(e=>{let t="z"===e[e.length-1].type.toLowerCase(),l=e[0],[a,n]=[l.values[0],l.values[1]],s=t?e[e.length-2]:e[e.length-1],[r,p]=[s.values[s.values.length-2],s.values[s.values.length-1]];return!t||a==r&&n==p||(e.pop(),e.push({type:"L",values:[a,n]},{type:"Z",values:[]})),e})(e),e.pop());let u=e[e.length-1].values,y=u.length,h=p?e[0]:{type:"M",values:[u[y-2],u[y-1]]};r.push(h),e.reverse();for(let t=1;t<e.length;t++){let l=e[t],a=l.type,n=l.values,p=e[t-1],u=p.type,y=[];y=[s(u,p.values).controlPoints,s(a,n).endPoints].flat(),r.push({type:u,values:y.flat()})}return p&&r.push({type:"z",values:[]}),r}function se(e="",{toAbsolute:t=!0,toRelative:l=!0,toShorthands:a=!0,decimals:n=3,quadraticToCubic:s=!0,arcToCubic:r=!1,cubicToArc:p=!1,arcAccuracy:u=4,keepExtremes:y=!0,keepCorners:h=!0,keepInflections:i=!0,extrapolateDominant:c=!1,addExtremes:o=!1,optimizeOrder:x=!0,removeColinear:f=!0,simplifyBezier:v=!0,autoAccuracy:g=!0,flatBezierToLinetos:M=!0,revertToQuadratics:d=!0,minifyD:m=0,tolerance:b=1,reverse:C=!1}={}){let A=Y(e,{quadraticToCubic:s,toAbsolute:t,arcToCubic:r}),w=JSON.parse(JSON.stringify(A)),L=A.length,P=Q(w),I=[];for(let e=0,t=P.length;e<t;e++){let t=P[e];C&&(t=ne(t)),f&&(t=le(t)),o&&(t=z(t,0,1)),x&&(t=ae(t)),f&&(t=te(t,b,M));let l=R(t),{pathData:a,bb:n,dimA:s}=l,r=a;if(r=v?re(r,{simplifyBezier:v,keepInflections:i,keepExtremes:y,keepCorners:h,extrapolateDominant:c,revertToQuadratics:d,tolerance:b,reverse:C}):r,p){let e=3;r.forEach((t,l)=>{let{type:a,values:n,p0:s,cp1:p=null,cp2:u=null,p:y=null}=t;if("C"===a){let t=K(s,p,u,y,e);t.isArc&&(r[l]=t.com)}}),r=W(r)}d&&r.forEach((e,t)=>{let{type:l,values:a,p0:n,cp1:s=null,cp2:p=null,p:u=null}=e;if("C"===l){let e=N(n,s,p,u);"Q"===e.type&&(r[t]=e)}}),I.push(r)}let $=I.flat();g&&(n=function(e){let t={x:e[0].values[0],y:e[0].values[1]},l=t,a=t;e[0].decimals=0;let n=1/0;for(let s=0,r=e.length;s<r;s++){let r=e[s],{type:p,values:u}=r,y=u.length?u.slice(-2):[t.x,t.y];a={x:y[0],y:y[1]};let h=r.dimA?+r.dimA.toFixed(8):"M"!==p?+k(l,a).toFixed(8):0;h&&h<n&&(n=h),"M"===p&&(t=a),l=a}let s=Math.floor(50/n).toString().length;return Math.min(Math.max(0,s),8)}($));let S=$.length;return w=B($,{toRelative:l,toShorthands:a,decimals:n}),{pathData:w,d:j(w,m),report:{original:L,new:S,saved:L-S,decimals:n,success:S<L}}}function re(e,{keepExtremes:t=!0,keepInflections:l=!0,keepCorners:a=!0,extrapolateDominant:n=!0,tolerance:s=1,reverse:r=!1}={}){let p=[e[0]];for(let r=2,u=e.length;u&&r<=u;r++){let y=e[r-1],h=r<u?e[r]:null,i=h?.type||null,c=y?.directionChange||null,o=h?.directionChange||null,{type:x,values:f,p0:v,p:g,cp1:M=null,cp2:d=null,extreme:m=!1,corner:b=!1,dimA:C=0}=y;if("C"===x&&"C"===i)if(l&&o||a&&b||!c&&t&&m)p.push(y);else{let i=O(y,h,n,s),c=0;if(1===i.length){y=i[0];let h=1;c+=y.error;for(let p=r+1;c<s&&p<u;p++){let r=e[p];if("C"!==r.type||l&&r.directionChange||a&&y.corner||t&&y.extreme)break;let u=O(y,r,n,s);1===u.length&&h++,y=u[0]}p.push(y),r<u&&(r+=h)}else p.push(y)}else p.push(y)}return r&&(p=ne(p)),p}ee[77]=2,ee[109]=2,ee[65]=7,ee[97]=7,ee[67]=6,ee[99]=6,ee[76]=2,ee[108]=2,ee[81]=4,ee[113]=4,ee[83]=4,ee[115]=4,ee[84]=2,ee[116]=2,ee[72]=1,ee[104]=1,ee[86]=1,ee[118]=1,ee[90]=0,ee[122]=0;const{abs:pe,acos:ue,asin:ye,atan:he,atan2:ie,ceil:ce,cos:oe,exp:xe,floor:fe,log:ve,hypot:ge,max:Me,min:de,pow:me,random:be,round:Ce,sin:Ae,sqrt:we,tan:Le,PI:Pe}=Math;"undefined"!=typeof window&&(window.svgPathSimplify=se,window.renderPoint=function(e,t,l="red",a="1%",n="1",s="",r=!0,p="",u=""){Array.isArray(t)&&(t={x:t[0],y:t[1]});let y=`<circle class="${u}" opacity="${n}" id="${p}" cx="${t.x}" cy="${t.y}" r="${a}" fill="${l}">\n  <title>${s}</title></circle>`;if(!r)return y;e.insertAdjacentHTML("beforeend",y)});export{Pe as PI,pe as abs,ue as acos,ye as asin,he as atan,ie as atan2,ce as ceil,oe as cos,xe as exp,fe as floor,ge as hypot,ve as log,Me as max,de as min,me as pow,be as random,Ce as round,Ae as sin,we as sqrt,se as svgPathSimplify,Le as tan};
